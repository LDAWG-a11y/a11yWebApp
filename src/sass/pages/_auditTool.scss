@use '../vendors/mq';

.counter-table__wrapper,
.sc-table__wrapper,
.modal__text-section {
  display: flex;
  flex-direction: column;
  justify-content: center;
  margin-bottom: $space-xxxl;
  width: 100%;
  overflow-x: auto;
}

.counter-table,
.sc-table {
  table-layout: fixed;
  border-collapse: collapse;
  overflow-x: auto;
  font-size: $medium-paragraph-size;
}

.counter-table__caption,
.sc-table__caption  {
  padding-bottom: $space-xs;
  text-align: left;
  font-size: $x-large-paragraph-size;
  font-weight: bold;
}

.counter-table th,
.sc-table th,
.counter-table td,
.sc-table td {
  border: 1px solid var(--color-text);
  width: fit-content;
  text-align: center;
  white-space: nowrap; 
}

.counter-table td {
  padding: $space-sm;
}

.sc-table td {
  padding: $space-lg;
}

.counter-table tbody tr:nth-child(odd),
.sc-table tbody tr:nth-child(odd) {
  background: var(--color-bg--light);
}

.counter-table th,
.sc-table th {
  padding: $space-sm;
  font-weight: bold;
}

.counter-table th:not([scope="col"]),
.sc-table th:not([scope="col"]) {
  text-align: left;
}

.counter-table th[scope="col"],
.sc-table th[scope="col"] {
  width: min-content;
}

.counter-table__group,
.sc-table__group {
  border: none;
}

.sc-table__group {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  z-index: 2;
}

.counter-table__group {
  display: flex;
  justify-content: center;
  align-items: center;
}

.counter-table__total,
.counter-table__result,
.sc-table__result,
.sc-table__total {
  display: inline-block;
  margin: 0 $space-xs;
  border-radius: $radius-sm;
  padding: $space-xs;
  text-align: center;
  font-weight: bold;
  transition: background 200ms ease-in;
}

.counter-table__result {
  width: 2.75rem;
}

.counter-table__total {
  width: 4rem;
}

.counter-table__result[data-pass=true],
.counter-table__total[data-pass=true],
.sc-table__result[data-pass=true],
.sc-table__total[data-pass=true] {
  background-color: var(--color-tip);
}

.counter-table__result[data-pass=false],
.counter-table__total[data-pass=false],
.sc-table__result[data-pass=false],
.sc-table__total[data-pass=false] {
  background-color: var(--color-warn);
}

.sc-table__result,
.sc-table__total {
  width: $space-xxxxl;
}

.counter-table__btn {
  position: relative;
  border: 2px solid var(--color-interactive);;
  border-radius: $radius-pill;
  height: 2rem;
  width: 2rem;
  background-color: var(--color-interactive);
}

.counter-table__btn--minus::before,
.counter-table__btn--add::before,
.counter-table__btn--add::after  {
  content: "";
  position: absolute;
  background: var(--color-bg);
}

.counter-table__btn--minus::before,
.counter-table__btn--add::before {
  display: inline-block;
  top: .75rem;
  left: .25rem;
  width: 1.25rem;
  height: .25rem;
}

.counter-table__btn--add::after {
  top: .25rem;
  left: .75rem;
  width: .25rem;
  height: 1.25rem;
}

.counter-table__btn:focus-visible {
  background: var(--color-bg);
}

.counter-table__btn--minus:focus-visible::before,
.counter-table__btn--add:focus-visible::before,
.counter-table__btn--add:focus-visible::after {
  background: var(--color-interactive);
}

.sc-table__link {
  @include focus-indicator;
    @extend %underline;

    display: inline-block;
    margin: -3px -3px;
    padding: 3px 3px;
    font-weight: 600;
    color: var(--color-interactive);
}

.sc-table__radio-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  flex-direction: row;
  padding-left: 0 $space-xs;
  width: calc(100% + .5rem);
  margin-bottom: $space-xxs;
}

.sc-table__label {
  display: flex;
  align-items: center;
  border-radius:$radius-sm;
  padding: $space-xxxs $space-xxs;

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border-radius: $radius-xs;
    z-index: -1;
  }
}

.sc-table__label:not(:last-child) {
  margin-bottom: $space-xs;
  cursor: pointer;
}

.sc-table__radio {
  flex-shrink: 0;
  position: relative;
  margin-left: $space-xxs;
  border: 2px solid var(--color-interactive);
  border-radius: $radius-pill;
  width: 1.75rem;
  height: 1.75rem;
  -webkit-appearance: none;
  appearance: none;
  background-color: var(--color-bg);
  cursor: pointer;
}

.sc-table__radio::before {
  position: absolute;
  inset: .2rem;
  content: "";
  border-radius: $radius-pill;
  height: 1.125rem;
  width: 1.125rem;
  transform: scale(0);
  transition: transform 200ms ease-in-out;
}

.sc-table__radio:focus {
  outline: 3px solid transparent;
  outline-offset: -2px
}

.sc-table__radio:focus + .sc-table__label {
  color: var(--color-bg);
}

.sc-table__radio:focus + .sc-table__label::before {
  background-color: var(--color-interactive);
}

.sc-table__radio:checked {
  border-color: var(--color-interactive);
}

.sc-table__radio:checked::before {
  background-color: var(--color-interactive);
  transform: scale(1);
}

.sc-table__comment {
  margin: $space-xs 0 0;
  border: 2px solid var(--color-interactive);
  border-radius: $radius-sm;
  padding: $space-xxs;
  min-width: 22.5rem;
  width: 100%;
  height: 9rem;
  font-size: $default-paragraph-size;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-bg);
}

.sc-table__comment:focus-visible {
  outline: 3px solid var(--color-interactive);
  outline-offset: 2px;
}

.control__container {
  display: flex;
  flex-direction: column;

  @include mq.mq($from:md) {
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: $space-lg;
  }
}

.control__btn {
  margin: $space-xs;
  border-width: 3px;
  border-style: solid;
  border-radius: $radius-xxl;
  padding: $space-xs $space-md;
  height: 3rem;
  line-height: 1.3;
  font-size: $default-paragraph-size;
  font-weight: bold;
}

.control__btn--clear {
  @include focus-indicator(true, true, true);

  border: 3px solid var(--color-warn--bright);
  background-color: var(--color-warn--bright);
  color: var(--color-bg);
  text-align: center;
  text-decoration: none;
}

.control__btn--generate {
  @include focus-indicator(true, true, false, true);

  border-color: var(--color-interactive);
  background-color: var(--color-interactive);
  color: var(--color-bg);
}

.sc-table__err-msg {
  display: inline-block;
  margin-bottom: $space-sm;
  width: 100%;
  border-radius: $radius-sm;
  padding: 0 $space-xs;
  line-height: 2;
  text-align: center;
  background-color: var(--color-warn);
  transform: scaleY(1);
  transition: transform 200ms ease-in;  
}

.sc-table__group > legend {
  width: calc(100% - .75rem);
}

.sc-table__group > legend,
.sc-table__comment-label {
  max-height: 3rem;
  overflow: hidden;
  transition: transform 200ms ease-in, max-height 200ms;
}

.sc-table__group[aria-invalid=false] legend,
.sc-table__comment-label[data-valid=true],
.sc-table__err-msg[aria-hidden=true] {
  transform: scaleY(0);
  max-height: 0;
}

.sc-table__comment-label {
  display: block;
  margin-bottom: -$space-xxs;
}

.modal {
  position: fixed;
  top: $space-xl;
  left: 50%;
  visibility: hidden;
  border: 2px solid var(--color-inactive);
  padding: $space-md $space-sm;
  border-radius: $radius-lg;
  height: 94vh;
  width: calc(100% - 4rem);
  max-width: 70rem;
  background: var(--color-bg);
  box-shadow: 4px 4px 15px -4px rgba(133,133,133,0.8);
  z-index: 11;
}

.modal__inner {
  margin-top: $space-xxl;
  height: calc(90vh - 2.5rem);
  overflow-y: auto;
  overflow-x: hidden;
}

.modal:focus::before {
  content: "";
  position: absolute;
  inset: -6px;
  border: 3px solid var(--color-interactive);
  border-radius: $radius-xl;
  z-index: 9;
  pointer-events: none;
}

.modal[data-displayed=true] {
  visibility: visible;
  transform: translate(-50%, 0);
  opacity: 1;
  transition: visibility 0ms ease-in, opacity 300ms ease-in, transform 300ms ease-in;
}

.modal[data-displayed=false] {
  visibility: hidden;
  transform: translate(-50%, 100%);
  opacity: 0;
  transition: visibility 300ms ease-in, opacity 300ms ease-in, transform 300ms ease-in;
}

.modal__close-btn--top {
  position: absolute;
  display: flex;
  justify-content: center;
  padding: 2px;
  top: .75rem;
  right: 2.25rem;
  width: 2.25rem;
  height: 2.25rem;
  border-radius: $radius-pill;
}

.modal__close-btn--top::before,
.modal__close-btn--top::after {
  content: "";
  position: absolute;
  width: 4px;
  height: calc(100% - 4px);
  background-color: var(--color-bg);
}

.modal__close-btn--top:focus-visible {
  background-color: var(--color-bg) ;
}

.modal__close-btn--top:focus-visible::before,
.modal__close-btn--top:focus-visible::after {
  background-color: var(--color-warn--bright);
}

.modal__close-btn--top::before {
  transform: rotate(-45deg);
}

.modal__close-btn--top::after {
  transform: rotate(45deg);
}

.modal__footer {
  display: flex;
  justify-content: flex-end;
}

.modal__close-btn--bottom {
  margin: 0 $space-xs $space-xs 0;
}

.modal__text-section {
  font-size: $default-paragraph-size;
}

[class^="modal__section-wrapper"] {
  margin-bottom: $space-lg;
  border: 1px solid var(--color-inactive);
  border-radius: $radius-sm;
  padding: $space-sm $space-xs;
}

[class^="modal__section-wrapper"] div:first-of-type {
  display: flex;
  justify-content: flex-end;
}

.modal__text-section ul {
  margin: $space-xs $space-lg;
}

.modal__text-section table {
  text-align: left;
}

.modal__text-section table td {
  text-align: left;
}

.modal__copy-btn {
  position: relative;
  margin-bottom: $space-sm;
  border: 2px solid var(--color-interactive);
  border-radius: $radius-sm;
  padding: $space-xxs $space-sm;
  font-size: $medium-paragraph-size;
  color: var(--color-bg);
  background-color: var(--color-interactive);
}

.modal__copy-btn::before {
  content: "";
  position: absolute;
  inset: -8px;
}

// .modal__copy-btn:focus-visible::before {
//   border: 3px solid #923ae4;
//   border-radius: 6px;
// }



// .flex {
//   display: flex;
//   justify-content: center;
//   align-items: center;
// }

// .visually-hidden {
//   border: 0 !important;
//   clip: rect(1px, 1px, 1px, 1px);
//   -webkit-clip-path: inset(50%);
//   clip-path: inset(50%);
//   height: 1px;
//   overflow: hidden;
//   margin: -1px;
//   padding: 0;
//   position: absolute;
//   width: 1px;
//   white-space: nowrap; 
// }

.modal__copy-btn:active {
  // background-color: rebeccapurple;
}