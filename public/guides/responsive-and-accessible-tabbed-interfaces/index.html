<!doctype html><html lang="en" class="no-js"><head><title>Responsive &amp; accessible tabbed interfaces | Make Things Accessible</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#702A8C"><meta name="description" content="Tabbed interfaces are one of those components that make sense at larger viewports, but are often problematic on smaller screens. Let&#39;s build an accessible progressively enhanced widget to handle all viewports"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="color-scheme" content="light dark"><script>document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('has-js');
    
    if (localStorage.getItem('theme')) {
      localStorage.setItem('data-pref--theme', localStorage.getItem('theme'));
      localStorage.removeItem('theme');
    }

    if (localStorage.getItem('data-pref--theme')) {
      document.documentElement.setAttribute('data-pref--theme', localStorage.getItem('data-pref--theme'))
    }</script><link rel="preload" href="/fonts/rem-500.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/rem-700.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/rem-900.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/red-hat-display-400.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/red-hat-display-500.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico"><link rel="canonical" href="https://www.makethingsaccessible.com/guides/responsive-and-accessible-tabbed-interfaces/"><meta property="og:title" content="Responsive &amp; accessible tabbed interfaces | Make Things Accessible"><meta property="og:description" content="Tabbed interfaces are one of those components that make sense at larger viewports, but are often problematic on smaller screens. Let&#39;s build an accessible progressively enhanced widget to handle all viewports"><meta property="og:url" content="https://www.makethingsaccessible.com/guides/responsive-and-accessible-tabbed-interfaces/"><meta property="og:locale" content="en_GB"><meta property="og:site_name" content="Make Things Accessible"><meta property="og:type" content="website"><meta property="og:image" content="https://www.makethingsaccessible.com/img/social-logo.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="Make Things Accessible"><meta name="twitter:description" content="Responsive &amp; accessible tabbed interfaces | Make Things Accessible"><meta name="twitter:image" content="https://www.makethingsaccessible.com/img/social-logo.jpg"><meta name="twitter:image:alt" content="Make Things Accessible logo"><meta name="generator" content="Eleventy"><script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Article",
        "name": "Responsive &amp; accessible tabbed interfaces",
        "author": {
          "@type": "Person",
          "name": "[object Object]"
        },
        "datePublished": "2023-11-24T00:00:00.000Z"
      }</script></head><body><header class="header"><a class="skip-link" href="#h1">Skip navigation</a><nav class="nav btm__gutter--largest"><button class="nav__prefs-btn flex--middle" id="prefsBtn"><svg width="32px" height="32px" viewBox="0 0 32 32" focusable="false" aria-hidden="true"><path d="M 30.460938 19.730469 L 27.800781 18.195312 C 28.070312 16.742188 28.070312 15.257812 27.800781 13.804688 L 30.460938 12.269531 C 30.769531 12.09375 30.90625 11.730469 30.804688 11.394531 C 30.113281 9.167969 28.929688 7.15625 27.386719 5.480469 C 27.148438 5.226562 26.761719 5.164062 26.460938 5.335938 L 23.800781 6.875 C 22.679688 5.914062 21.394531 5.167969 20 4.679688 L 20 1.613281 C 20 1.261719 19.757812 0.957031 19.414062 0.882812 C 17.117188 0.367188 14.769531 0.394531 12.585938 0.882812 C 12.242188 0.957031 12 1.261719 12 1.613281 L 12 4.6875 C 10.613281 5.179688 9.324219 5.925781 8.199219 6.882812 L 5.542969 5.34375 C 5.238281 5.167969 4.855469 5.226562 4.617188 5.488281 C 3.074219 7.15625 1.894531 9.167969 1.199219 11.398438 C 1.09375 11.738281 1.238281 12.101562 1.542969 12.273438 L 4.207031 13.8125 C 3.9375 15.261719 3.9375 16.75 4.207031 18.199219 L 1.542969 19.738281 C 1.238281 19.914062 1.101562 20.273438 1.199219 20.613281 C 1.894531 22.835938 3.074219 24.851562 4.617188 26.523438 C 4.855469 26.78125 5.242188 26.84375 5.542969 26.667969 L 8.207031 25.132812 C 9.324219 26.09375 10.613281 26.835938 12.007812 27.324219 L 12.007812 30.398438 C 12.007812 30.75 12.25 31.054688 12.59375 31.132812 C 14.886719 31.644531 17.238281 31.617188 19.417969 31.132812 C 19.761719 31.054688 20.007812 30.75 20.007812 30.398438 L 20.007812 27.324219 C 21.394531 26.832031 22.679688 26.085938 23.804688 25.132812 L 26.46875 26.667969 C 26.773438 26.84375 27.15625 26.789062 27.394531 26.523438 C 28.9375 24.855469 30.117188 22.84375 30.8125 20.613281 C 30.90625 20.269531 30.769531 19.90625 30.460938 19.730469 Z M 16 21 C 13.242188 21 11 18.757812 11 16 C 11 13.242188 13.242188 11 16 11 C 18.757812 11 21 13.242188 21 16 C 21 18.757812 18.757812 21 16 21 Z M 16 21 "/></svg> <span class="visually-hidden">Settings</span></button> <button class="nav__menu-btn flex--middle" id="navBtn" aria-controls="navPanel" aria-expanded="false" data-untouched><span class="nav__menu-bar"></span> <span class="visually-hidden">Menu</span></button><div class="nav__wrapper" id="navPanel"><ul class="nav__list"><li class="nav__item"><a class="nav__link" href="/">Home</a></li><li class="nav__item"><a class="nav__link" href="/about/">About</a></li><li class="nav__item"><a class="nav__link" href="/guides/">Guides</a></li><li class="nav__item"><a class="nav__link" href="/faqs/">FAQs</a></li><li class="nav__sub-items--parent"><button class="nav__btn--collab" aria-expanded="false" aria-controls="collabNavPanel" id="collabBtn">Collaborations</button><div class="nav__list-sub-panel" id="collabNavPanel"><ul class="nav__list--level-2"><li><h2 class="nav__list-collaborator" data-no-accent>Access and Assistance for All</h2><ul class="nav__list--level-3"><li><a class="nav__link-sub" href="/aaa/">AAA Home</a></li><li><a class="nav__link-sub" href="/aaa/roles/">AAA Roles</a></li><li><a class="nav__link-sub" href="/aaa/student-stories/">AAA Student Stories</a></li><li><a class="nav__link-sub" href="/aaa/supporters/">AAA Supporters</a></li></ul></li></ul></div></li></ul></div></nav><picture class="header__logo flex--middle btm__gutter--largest"><source media="(prefers-color-scheme: light)" srcset="/img/mta-light-sm.webp 360w, /img/mta-light.webp 600w" data-main-logo><source media="(prefers-color-scheme: light)" srcset="/img/mta-light.png" data-main-logo><source media="(prefers-color-scheme: dark)" srcset="/img/mta-dark-sm.webp 360w, /img/mta-dark.webp" data-main-logo><source media="(prefers-color-scheme: dark)" srcset="/img/mta-dark.png" data-main-logo><img src="/img/mta-light.png" height="136" width="600" alt="Make Things Accessible, logo"></picture><div class="header__search-block btm__gutter--largest"><label id="sFilterLbl" for="sFilter" class="search__label">Search for Guides or Tags, by keyword</label><div class="search__wrapper" data-expanded="false"><input class="search__input" id="sFilter" type="text" role="combobox" aria-activedescendant="" aria-autocomplete="list" aria-expanded="false" aria-controls="searchDialog" autocomplete="off"> <svg aria-hidden="true" focusable="false" stroke="#000" stroke-width="9.8" viewBox="-19.6 -19.6 529.6 529.6" height="1.25rem"><path d="M484.1 454.8 373.6 344.2a210.6 210.6 0 1 0-29.2 29.2l110.5 110.5c12.9 11.8 25 4.2 29.2 0a20 20 0 0 0 0-29.1zm-443-244a169.5 169.5 0 1 1 339 0 169.5 169.5 0 0 1-339 0z"/></svg></div><div class="search__panel" id="searchDialog" role="dialog" aria-labelledby="sFilterLbl"><ul class="search__list"></ul><div aria-live="polite" class="visually-hidden search__msg flex--middle"><span class="search__msg--icon"><svg id="cWarn" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#currentColor" d="M18 0C8.059 0 0 8.059 0 18s8.059 18 18 18 18-8.059 18-18S27.941 0 18 0Zm0 29.488c-1.406 0-2.371-1.082-2.371-2.488 0-1.445 1.004-2.488 2.371-2.488 1.445 0 2.371 1.043 2.371 2.488 0 1.406-.926 2.488-2.371 2.488Zm.934-9.508c-.36 1.223-1.489 1.247-1.864 0-.433-1.433-1.976-6.875-1.976-10.41 0-4.668 5.836-4.687 5.836 0 0 3.555-1.625 9.14-1.996 10.41Zm0 0"/></svg></span><span id="sMsg" class="search__msg--text"></span></div></div></div></header><main class="main"><h1 id="h1" class="main__title btm__gutter--largest" tabindex="-1">Responsive &amp; accessible tabbed interfaces</h1><div style="display: none;"><svg id="cTip" aria-hidden="true" focusable="false" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg"><path fill="var(--v2--color-black)" d="M1 11h3v2H1v-2m9 11c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-1h-4v1m3-21h-2v3h2V1M4.9 3.5 3.5 4.9 5.6 7 7 5.6 4.9 3.5M20 11v2h3v-2h-3m-.9-7.5L17 5.6 18.4 7l2.1-2.1-1.4-1.4M18 12a6 6 0 0 1-3 5.2V19c0 .6-.4 1-1 1h-4c-.6 0-1-.4-1-1v-1.8A6 6 0 0 1 12 6a6 6 0 0 1 6 6M8 12l.1 1H16l.1-1a4 4 0 1 0-8 0Z"/></svg> <svg id="cInfo" aria-hidden="true" focusable="false" aria-label="Info: " width="24px" height="24px"><path fill="var(--v2--color-black)" d="M13.5 4A1.5 1.5 0 0 0 12 5.5 1.5 1.5 0 0 0 13.5 7 1.5 1.5 0 0 0 15 5.5 1.5 1.5 0 0 0 13.5 4m-.4 4.8c-1.2 0-4.4 2.7-4.4 2.7-.2.1-.1.1 0 .4.2.3.2.3.4.1.2 0 .5-.3 1-.6 2.2-1.4.4 1.7-.5 7-.4 2.7 2 1.3 2.6.9l2.3-1.6c.3-.2.1-.3 0-.5-.2-.2-.3 0-.3 0-.7.4-1.8 1.3-2 .7-.2-.6 1-4.5 1.7-7.2.1-.6.4-2-.8-2Z"/></svg> <svg id="cWarn" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#currentColor" d="M18 0C8.059 0 0 8.059 0 18s8.059 18 18 18 18-8.059 18-18S27.941 0 18 0Zm0 29.488c-1.406 0-2.371-1.082-2.371-2.488 0-1.445 1.004-2.488 2.371-2.488 1.445 0 2.371 1.043 2.371 2.488 0 1.406-.926 2.488-2.371 2.488Zm.934-9.508c-.36 1.223-1.489 1.247-1.864 0-.433-1.433-1.976-6.875-1.976-10.41 0-4.668 5.836-4.687 5.836 0 0 3.555-1.625 9.14-1.996 10.41Zm0 0"/></svg></div><div class="guide__info-panel"><div class="guide__author"><strong>By: </strong><a href="/authors/dlee">Darren Lee</a></div><div class="guide__date"><strong>Posted: </strong><time datetime="2023-11-24T00:00:00.000Z">Nov 24, 2023</time></div><strong class="guide__label">Tagged with:</strong><ul class="tags tags__all"><li class="tag__item"><a href="/tags/component/" class="tag__link">Component</a></li><li class="tag__item"><a href="/tags/html/" class="tag__link">HTML</a></li><li class="tag__item"><a href="/tags/javascript/" class="tag__link">JavaScript</a></li><li class="tag__item"><a href="/tags/aria/" class="tag__link">ARIA</a></li></ul></div><nav class="toc__nav" aria-labelledby="acc-1"><h2 id="acc-1" class="accordion accordion--full" data-no-accent>Table of contents</h2><div class="accordion__panel accordion__panel--full"><div><ol><li><a href="#the-tabbed-interface">The tabbed interface</a></li><li><a href="#the-anatomy-of-a-tabbed-interface">The anatomy of a tabbed interface</a></li><li><a href="#before-we-move-on">Before we move on</a></li><li><a href="#so-without-further-ado-lets-get-stuck-in">So, without further ado, let's get stuck in</a></li><li><a href="#codepen">Codepen</a></li><li><a href="#wrapping-up">Wrapping up</a></li><li><a href="#screenshots">Screenshots</a></li><li><a href="#completed-code">Completed code</a></li></ol></div></div></nav><article class="cms"><div class="cms__anchor-wrapper"><h2 id="the-tabbed-interface" tabindex="-1">The tabbed interface</h2><a class="cms__anchor flex--middle" href="#the-tabbed-interface" aria-labelledby="the-tabbed-interface"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>Often tabbed interfaces are just called tabs and they are an interface design pattern that we will all be familiar with, as some websites use this pattern, but all desktop operating systems do and some mobile apps.</p><p>Called tabs or a tabbed interface because of its resemblance to the little tabs you put on the files that would typically be in a file cabinet or binder. Each tab's position is usually slightly offset for quicker visual identification of a specific file.</p><p>On a computer, they are usually represented by a series of &quot;tabs&quot; (either horizontal or vertical) and each has a corresponding panel. There would always be one panel visible and the others would remain hidden until their corresponding tab is clicked. There are implementations where multiple can be open, but let's pretend there isn't.</p><p>These UI elements are probably usable to the majority of users when built correctly and styled with strong visual affordances, in that they're commonplace on your Mac or PC for many of the system settings and file directories. They're even present on the operating systems of your phone or tablet. That's not me saying they are a good pattern to use, that's for your users with disabilities to inform you of that, it's their opinion what counts, not mine.</p><h3>The problem with tabs</h3><p>Tabs seem to make more sense on larger viewports, typically desktops, laptops and some tablets (each at regular zoom levels). But just because something works well on larger viewports at regular zoom levels that doesn't guarantee it will work as well on a smaller viewport or when the viewport is zoomed enough to trigger the &quot;mobile view&quot;. What we tend to find across the web is something that doesn't really work at smaller viewports. I guess this is a classic case of &quot;Desktop first, mobile worst&quot;, in that the experience can differ quite dramatically between the viewport sizes.</p><p>The most obvious issue is always going to be the lack of screen real estate, on a smaller viewport you simply cannot fit your horizontal tabs across the screen width if you have more than a few single-word tabs, but even then, the layout will likely break if a user sets their default text size to &quot;Large&quot; or &quot;Largest&quot; etc. What you then end up with is 2 or more rows of &quot;tabs&quot;, so activating a <code>tab</code> on the top row will display the <code>tabpanel</code> immediately after the bottom row, which maybe looks a little odd.</p><h4>Vertical tabs to the rescue?</h4><p>Errm, possibly not. Again you end up in that situation where the only time the visible <code>tabpanel</code> immediately follows the active <code>tab</code> is if you activated the last <code>tab</code>, which some users may find a little confusing and cause them to have to think about what is going on and how these somewhat distant elements are related.</p><blockquote>Don't make me think<footer>Steve Krug</footer></blockquote><p>I am of course making some assumptions here that users find the pattern a little confusing and thus far I am just referring to users who can see the interface, as it's the visuals we are focusing on right now.</p><div class="cms__anchor-wrapper"><h2 id="the-anatomy-of-a-tabbed-interface" tabindex="-1">The anatomy of a tabbed interface</h2><a class="cms__anchor flex--middle" href="#the-anatomy-of-a-tabbed-interface" aria-labelledby="the-anatomy-of-a-tabbed-interface"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>Just a quick run through what is needed:</p><ul><li>A wrapping element with <code>role=&quot;tablist&quot;</code>, this will hold the individual tabs, obviously there should be more than one <code>tab</code> present in a <code>tablist</code></li><li>The current <code>tab</code> will need <code>aria-selected=&quot;true&quot;</code> to indicate it is the currently active <code>tab</code>, for screen reader users</li><li>Each <code>tab</code> having <code>aria-controls=&quot;[IDRef of the associated tabpanel]&quot;</code>, to create a programmatic relationship between each <code>tab</code> and its corresponding <code>tabpanel</code></li><li>The panel should have a role of tabpanel and an accessible name, using aria-labelledby=[IDRef of the controlling button]&quot;, is a common approach</li><li>An interaction model which uses arrow navigation between tabs, only allowing one <code>tab</code> to be focusable with the <kbd>tab</kbd> key and then using arrows to focus on adjacent tabs, if using a button or link, then <code>tabindex=&quot;-1&quot;</code> would be required for removing the non-active tabs out of the tab sequence</li><li>For each of the tabpanels that are not visible, hide the <code>tabpanel</code> and its contents from both the accessibility tree and the focus order, so they can only be accessed when the <code>tabpanel</code> is visible</li></ul><div class="cms__anchor-wrapper"><h2 id="before-we-move-on" tabindex="-1">Before we move on</h2><a class="cms__anchor flex--middle" href="#before-we-move-on" aria-labelledby="before-we-move-on"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>Just a few alternatives for you to look at, Don't worry, I'm not just going to copy anybody's work or paraphrase what has already been said, this is just going to be an alternative, nothing more.</p><ul><li>If you are unaware of the excellent <a href="https://inclusive-components.design/">Inclusive Components book by Heydon Pickering</a>, you should definitely give that a read, <a href="https://inclusive-components.design/tabbed-interfaces/">the chapter for Tabbed Interfaces</a> is obviously related to what we are doing here. Heydon's approach is obviously solid, a progressively enhanced table of contents that becomes tabs when JavaScript is available</li><li><a href="https://dequeuniversity.com/library/aria/tabbed-accordion#">There is also the Deque tabby-accordion things</a>, which make so much sense visually, the <code>tabpanel</code> always displays directly below its corresponding <code>tab</code>, but unfortunately, that <code>tabpanel</code> is inside the <code>tablist</code>, which isn't valid ARIA</li><li>Finally, <a href="https://piccalil.li/tutorial/solution-005-tabs/">Andy Bell has an interesting solution</a>, one I had not seen before until recently, where the <code>tablist</code> itself is scrollable, horizontally, so they still appear as tabs on smaller viewports. Just one little niggle on this one, I could not get the last tab to be fully in view using a keyboard alone, but other than that, these are are really neat solution</li></ul><h3>OK, so what is our approach?</h3><p>Well, we're just going to go with tabs on larger viewports and accordions on smaller viewports, but we will of course do this properly, in that there will be no incorrect roles present on either widget, all properties will be correct and each widget will have the correct interaction model. We'll also start from a nice progressively enhanced version and only do the magic where JS is available.</p><p>If this isn't the solution for you, I recommend exploring those linked above.</p><div class="cms__anchor-wrapper"><h2 id="so-without-further-ado-lets-get-stuck-in" tabindex="-1">So, without further ado, let's get stuck in</h2><a class="cms__anchor flex--middle" href="#so-without-further-ado-lets-get-stuck-in" aria-labelledby="so-without-further-ado-lets-get-stuck-in"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>I'm going to explain this step-by-step, which if you're already comfortable with JS will likely be far too much waffling from me, but maybe some folks are just starting out with it, so you can skip past those bits.</p><h3>An MVP for when there is no JS</h3><p>Let's start with the good stuff, the HTML, we want this to be our minimum viable product (MVP), this should be accessible if or when JS doesn't load or the user chooses not to allow it. Given that tabs usually show the the first panel on page load, we could do something similar, we could use the <code>&lt;details&gt;&lt;summary&gt;</code> element and force the first one to be <code>open</code> on page load. There are still some browser inconsistencies, as <a href="https://www.scottohara.me/blog/2022/09/12/details-summary.html">Scott O'Hara points out here</a> and <a href="https://adrianroselli.com/2019/04/details-summary-are-not-insert-control-here.html">Adrian Roselli points out here.</a></p><p>Is it appropriate for us to use this element? Hmm, well it has some quirks across browsers, but no show-stopping issues, so we'll do so tentatively. Ultimately let your users' needs guide your decisions, not some random guy on the internet.</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>widget__wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>details</span> <span class="token attr-name">open</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">></span></span>Widget 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Widget 1 contents: Lorem ipsum dolor sit amet consectetur adipisicing<br>        elit. Porro quasi ab, error fugiat at, maiores enim impedit cumque<br>        quidem similique et laborum aliquam modi assumenda officiis est!<br>        Sapiente, non neque! <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Test 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>details</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>details</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">></span></span>Widget 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Widget 2 contents: Lorem ipsum dolor sit amet consectetur, adipisicing<br>        elit. Numquam molestias nostrum repudiandae, quaerat alias iste placeat<br>        at a, sequi deserunt iure praesentium velit repellendus ipsum culpa<br>        ratione soluta eius magni quasi fugiat repellat necessitatibus fugit.<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Test 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>details</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>details</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">></span></span>Widget 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Widget 3 contents: Lorem ipsum dolor sit amet consectetur, adipisicing<br>        elit. Est illo hic vitae tenetur omnis laborum itaque vero adipisci<br>        doloremque optio ullam, vel similique aliquam quo! <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Test 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>details</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>So, we have three <code>&lt;details&gt;</code> &amp; <code>&lt;summary&gt;</code> elements and the first has the <code>open</code> attribute, to have some visual similarity with the tabbed interface. Notice I have a wrapping <code>&lt;div&gt;</code> inside each <code>&lt;details&gt;</code> which is a sibling of the <code>&lt;summary&gt;</code> element? As you may have multiple paragraphs or even other stuff inside your <code>&lt;details&gt;</code> it makes sense to wrap it all in something, making it easier to grab those contents with JS, assuming we mark it up correctly the <code>&lt;summary&gt;</code> is the first child, we the know that <code>&lt;div&gt;</code> will be the last child and it will hold the entirety of the collapsible content.</p><p>Also, I have wrapped them all in a <code>&lt;div class=&quot;widget__wrapper&quot;&gt;</code> because we'll need that for DOM manipulation and also I called it that because it's neither tabs or accordions all of the time, so due to my lack of creativity, we'll just call this element a widget.</p><h3>Cool, JS is available, let's do the magic</h3><p>What I am going to do is just show each step's code on its own as opposed to making the code block longer and longer at each step, thus making the page overly long. I will of course provide completed files at the end.</p><h4>Setting up our main variables</h4><p>First we'll initialise our global variables and then we'll build a string from the contents of the <code>&lt;details&gt;</code> and <code>&lt;summary</code> elements, so we can use this as our base HTML. Once that is all sorted, we'll remove everything from our wrapper and insert our new string as HTML and then reference the global variables we need from that new HTML.</p><h5 class="accordion">Explainer 1</h5><div class="accordion__panel"><div><ul><li><p>First we want to reference our <code>&lt;div class=&quot;widget__wrapper&quot;&gt;</code> element and assign it to the `widgetWrapper` variable<br>* We initialise two variables in the global scope, that we need later `baseHTML` (which we're setting to an empty string) and also `open`, which we will set to `0`<br>* We're going to switch the widget type based upon a media query, so we use the `matchMedia` method and store that in our `mq` variable, I've set the breakpoint's `(max-width: 767px)`, for this example<br>* Then we create an array `navKeys`, which holds all of the codes for the key presses we want for these widgets, that the browser doesn't provide<br>* We loop through all of our <code>&lt;details&gt;</code> elements that are present in the `widgetWrapper`, getting the index with the `idx` variable and each element with the `el` variable. As we iterate through we build a HTML string using a template literal (backticks), and use the addition assignment operator `+=`, so we concatenate that string on each iteration, this is saved to our `baseHTML` variable</p></li><li><p>Within that loop we add some classes and IDs, the latter of which we generate from the a string and <code>idx</code> variable <code>+ 1</code>, so each ID is unique. Both the buttons and the panels need IDs to create programmatic relationships and accessible names for the panels, respectively</p></li><li><p>We also add a data attribute to each button and panel, this holds a number we get from our <code>idx</code> variable and here we are starting that number from <code>0</code>, those data attributes for buttons and panels are <code>data-btn-idx</code> and <code>data-panel-idx</code>, respectively</p></li><li><p>We set the contents of each button within this string to be the text that was in the <code>&lt;summary&gt;</code> element, we know that this was the first child of a <code>&lt;details&gt;</code> element and we just want its text, so we do this with <code>${el.firstElementChild.textContent}</code></p></li><li><p>As we wrapped the collapsible contents of each <code>&lt;details&gt;</code> element in a <code>&lt;div&gt;</code> earlier, we know that this <code>&lt;div&gt;</code> is the last child of each <code>&lt;details&gt;</code> element and will contain the HTML we need, so we add the correct HTML inside each panel per loop iteration with <code>${el.lastElementChild.innerHTML}</code></p></li><li><p>Both accordions and tabs have <code>aria-controls</code> on the trigger which creates the programmatic relationship between the trigger and its corresponding panel, via an ID reference. Tabpanels have an accessible name and accordions can optionally have one, so we will use <code>aria-labelledby</code> and reference its controlling button element's ID, so each panels' accessible name becomes that of its controlling button. I have added these common attributes here, as they will never change</p></li><li><p>Outside of the loop we modify our <code>baseHTML</code> variable with a wrapper <code>&lt;div class=&quot;widget__controls-wrapper&quot;&gt;</code>, unfortunately tabs and accordions have a different structure and we need this additional wrapper, for the tabs. We add the contents from our loop <code>${baseHTML}</code>, within that new wrapper</p></li><li><p>Now that we have our <code>baseHTML</code> string that contains all of the HTML and contents we need for our initial HTML we can remove all of the HTML from the <code>widgetWrapper</code> by setting <code>widgetWrapper.innerHTML= ''</code>, which removes its contents.</p></li><li><p>Now we want to insert that <code>baseHTML</code> string at the beginning of the <code>widgetWrapper</code> element, with <code>insertAdjacentHTML('afterbegin', baseHTML)</code></p></li><li><p>Now we have out <code>baseHTML</code> in the DOM, we can assign them to variables, which we will use throughout this project</p><ul><li>We assign the <code>&lt;div class=&quot;widget__controls-wrapper&quot;&gt;</code> element, with <code>widgetControlsWrapper</code></li><li>We create an <code>Array.from()</code> a collection of the new buttons which is assigned to <code>widgetBtns</code></li><li>We create an <code>Array.from()</code> a collection of the new panels which is assigned to <code>widgetPanels</code></li></ul></li></ul></div></div><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> widgetWrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.widget__wrapper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> baseHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  open <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> mq <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(max-width: 767px)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> navKeys <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token string">'ArrowUp'</span><span class="token punctuation">,</span><br>  <span class="token string">'ArrowRight'</span><span class="token punctuation">,</span><br>  <span class="token string">'ArrowDown'</span><span class="token punctuation">,</span><br>  <span class="token string">'ArrowLeft'</span><span class="token punctuation">,</span><br>  <span class="token string">'Home'</span><span class="token punctuation">,</span><br>  <span class="token string">'End'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'details'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  baseHTML <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h3 class="widget__heading"><br>    &lt;button class="widget__btn" id="btn-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>      idx <span class="token operator">+</span> <span class="token number">1</span><br>    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" data-btn-idx="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" aria-controls="panel-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>    el<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span>textContent<br>  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/button>&lt;/h3><br>    &lt;div class="widget__panel" id="panel-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>      idx <span class="token operator">+</span> <span class="token number">1</span><br>    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" data-panel-idx="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" aria-labelledby="btn-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>    el<span class="token punctuation">.</span>lastElementChild<span class="token punctuation">.</span>innerHTML<br>  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>baseHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="widget__controls-wrapper"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseHTML<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>widgetWrapper<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>widgetWrapper<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">'afterbegin'</span><span class="token punctuation">,</span> baseHTML<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> widgetControlsWrapper <span class="token operator">=</span> widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><br>  <span class="token string">'.widget__controls-wrapper'</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> widgetBtns <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.widget__btn'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> widgetPanels <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><br>  widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.widget__panel'</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4>Adding a function to create accordions</h4><p>We'll create our accordions first as they are what will display on smaller viewports and mobile first tends to be the best way of building sites, so we create a <code>createAccordions()</code> function.</p><h5 class="accordion">Explainer 2</h5><div class="accordion__panel"><div><ul><li><p>We're just looping through the <code>widgetBtns</code> array, getting a reference to the button and its index on each loop iteration, with <code>btn</code> and <code>idx</code>, respectively</p></li><li><p>On page load we want the first panel to be open, but users can resize the window or zoom in or out after the page has loaded, which may trigger the media query change. We need to plan ahead a little here, we don't want a situation where our user has focused on something and should they trigger the media query change by zooming or resizing and then their focus gets lost</p><ul><li>So, what we will do is write a condition which checks to see if the <code>idx</code> is equal to the <code>open</code> variable we declared earlier, if it is: set <code>aria-expanded=&quot;true&quot;</code>, else set: <code>aria-expanded=&quot;false&quot;</code></li><li>We're setting a data attribute on each parent <code>&lt;h3&gt;</code> element called <code>data-expanded</code>, this is just a handy hook for the CSS so we can use the sibling selector to hide or show the correct accordion panel and its value must always be in sync with the value of its child button's <code>aria-expanded</code></li></ul></li><li><p>Tabs and accordions are quite different, so we have a heap of roles and properties to remove, also we need to reposition the actual panels in the DOM each time the media query changes. That's because an accordion panel opens below each trigger element, whereas tabs are contained in a <code>tablist</code> and the panels need to be outside of this</p><ul><li>We remove each of the unnecessary attributes that should not be present on an accordion, we do this with <code>removeAttribute</code> and then set the attribute name in the parentheses and quotes</li><li>We remove the attributes that should not be present on each accordions' panel</li><li>We get each button's parent and remove the role from that</li><li>We move the panels directly below their <code>&lt;h3&gt;</code> in the HTML source order, by matching the value of the panels' <code>aria-labelledby</code> attribute with the buttons' IDs, we then use the <code>after()</code> method to hoist these up into their correct position</li><li>We are also adding a <code>role=region</code> to each panel, so now our accordions' panels have a role with an accessible name (which we added in the <code>baseHTML</code> string with <code>aria-labelledby</code>)</li><li>We remove both the <code>tabindex</code> and <code>hidden</code> attributes, as we don't want these for accordions</li></ul></li></ul></div></div><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">createAccordions</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  widgetControlsWrapper<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  widgetBtns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">btn<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-setsize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-posinset'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><br>      widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>btn<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  widgetPanels<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">panel</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'region'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    panel<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    panel<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4>Adding a function to create tabs</h4><p>We'll now create a <code>createTabs()</code> function which will add all of the necessary roles and properties to our tabbed interface, as well as removing any artefacts of the accordions pattern.</p><h5 class="accordion">Explainer 3</h5><div class="accordion__panel"><div><ul><li>First we're going to add <code>role=&quot;tablist&quot;</code> to the <code>widgetControlsWrapper</code>, as the actual tabs need to be inside an element with this role</li><li>Now we're going to loop through the buttons again, we can't have the buttons' parent headings exposed as headings so we'll just neuter their semantics with <code>role=&quot;presentation&quot;</code></li><li>We add <code>role=&quot;tab&quot;</code> to each <code>&lt;button&gt;</code></li><li>As we're not using list elements, we don't get the enumeration they can provide to screen readers, so we can add that back by using <code>aria-setsize</code> by getting the <code>length</code> of the <code>widgetBtns</code> array. This tells us how many buttons are in our <code>tablist</code> and then we can get the current position of each tab from within that array by simply using the <code>idx</code> variable and adding <code>+1</code> per loop iteration, as the array is zero-based and humans start counting from 1</li><li>If the <code>idx</code> is equal to our <code>open</code> variable we set: <code>aria-selected=&quot;true&quot;</code> else we set the remaining tabs to <code>aria-selected=&quot;false&quot;</code></li><li>If the <code>idx</code> is not equal to <code>open</code>, set <code>tabindex=&quot;-1&quot;</code>, this removes the non-active tabs from the focus order</li><li>Then we remove all of the unnecessary <code>aria-expanded</code> attributes from the <code>&lt;button&gt;</code> elements and the <code>data-expanded</code> attributes from their parent headings</li></ul><p>Finally, we'll add the required roles and properties to the panels:</p><ul><li>We loop through our <code>widgetPanels</code> array, getting each element with the <code>panel</code> variable and the index with the <code>idx</code> variable</li><li>We set <code>role=&quot;tabpanel&quot;</code> on each panel</li><li>If the <code>idx</code> is equal to our <code>open</code> variable we set: <code>tabindex=&quot;0&quot;</code>, else we set the <code>hidden</code> attribute. This makes the active panel keyboard focusable, we're doing this as a user will be cycling through tabs with horizontal arrow keys, so pressing <kbd>Tab</kbd> whilst focusing on a <code>tab</code> should take them to the corresponding <code>tabpanel</code>. If you can guarantee the first element within the <code>tabpanel</code> is focusable, this would be unnecessary, but we'll assume we cannot know that in advance, as we may have content creators using a CMS and the panels could contain anything.</li><li>Then outside of that loop we get our <code>widgetPanels</code> array, <code>reverse()</code> it and then move the panels <code>after()</code> the <code>widgetControlsWrapper</code> element, so now they are in the correct position and we reversed that array so they appear in the correct order in the DOM</li></ul><p>So now we have two functions that generate the correct HTML and ARIA, one that creates accordions and one that creates tabs.</p></div></div><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">createTabs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  widgetControlsWrapper<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'tablist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  widgetBtns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">btn<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'presentation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'tab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-setsize'</span><span class="token punctuation">,</span> widgetBtns<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-posinset'</span><span class="token punctuation">,</span> idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">!==</span> open<span class="token punctuation">)</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  widgetPanels<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">panel<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'tabpanel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  widgetPanels<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> widgetControlsWrapper<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4>Just a tiny bit of CSS, for now</h4><p>Just so we can actually see these working, we'll hide the accordion panels when <code>data-expanded=&quot;false&quot;</code> is present on the button's parent heading with <code>display: none;</code> and we'll also belt and brace the <code>hidden</code> attribute for tabpanels with the same CSS.</p><p>Just so our tabs are displayed horizontally, we'll set <code>display: flex;</code> and <code>gap: 2px;</code> to the <code>tablist</code> container.</p><pre class="language-css"><code class="language-css"><span class="token selector">[role='tablist']</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">gap</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[hidden],<br>[data-expanded='false'] + .widget__panel</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h4>Adding events to display the correct widget</h4><p>Now we need to determine which widget to display, initially we need to do this on page load so we are providing the user with the widget that best fits their viewport.</p><h5 class="accordion">Explainer 4</h5><div class="accordion__panel"><div><ul><li>We add an <code>addEventListener()</code> to the <code>window</code>, listening to the event <code>'DOMContentLoaded'</code> when that event is complete, we check if the current media query <code>matches</code> our <code>mq</code> variable, if it does call <code>createAccordions()</code> if not call <code>createTabs()</code></li><li>We use a similar <code>addEventListener()</code> as above, this time we set it on the <code>mq</code> variable and listen for a <code>'change'</code> event, which just means the current media query has changed</li></ul><p>If you have been following along in a code editor, should you load the page or resize it, you will notice that we now display the correct element per media query. It looks pretty awful right now, but if you open up the DevTools, everything looks sweet in there and everything is updated correctly. Next, we need to make these widgets functional to mouse and keyboard events.</p></div></div><pre class="language-javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token parameter">evt</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  mq<span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token function">createAccordions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">createTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>mq<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">evt</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  mq<span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token function">createAccordions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">createTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4>Adding click functionality to the widgets</h4><p>Accordions are naturally easier to manage as we just need a <code>click</code> event, which will handle both mouse clicks and keyboard presses to expand or collapse their corresponding panel. We need to tackle the tabs in a slightly different way, we're going for tabs with automatic activation, which means as a user cycles through the tabs with arrow keys, each time they focus on a new <code>tab</code> it becomes the selected tab and its corresponding <code>tabpanel</code> is displayed. Tabs also need to add a <code>click</code> event, as we need this to work for mouse and touchscreen input too.</p><p>Now we will create a function <code>handleClickOnBtns()</code> which will listen for clicks on our <code>&lt;button&gt;</code> elements, the first thing we need to do is make sure that the <code>'click'</code> event was on an item that has the class which is present on our buttons, as we only want this code to run if it was our buttons that were clicked, otherwise it will run if somebody adds elements with certain roles to any of the panels, best to be safe, right?</p><h5 class="accordion">Explainer 5</h5><div class="accordion__panel"><div><ul><li>We check if the <code>&lt;button&gt;</code> has <code>aria-expanded=&quot;false&quot;</code>, if it does toggle that value to <code>&quot;true&quot;,</code> else set it to <code>&quot;false&quot;</code> we are using an <code>else if</code> here, as this way we're also checking for the presence of <code>aria-expanded</code>, as this is unique to the accordions in our example. If we just used an <code>else</code> which doesn't allow a condition, the event would add <code>aria-expanded</code> to tabs and we don't want that</li><li>We also toggle the <code>data-attribute</code> on the parent <code>&lt;h3&gt;</code> so its value is always in sync with the button's <code>aria-expanded</code> value</li></ul><p>Now let's add the functionality for tabs, at this stage it will only be for mouse &amp; touchscreen users, as we'll handle keyboard interaction in a separate function</p><p>We create a new <code>if</code> statement in our <code>handleClicksOnButtons()</code> function which requires the <code>target</code> have the attribute <code>role</code>, as this is one of the attributes that is only present on the tabs.</p><p>We call an as yet undeclared function named <code>setActiveTab()</code> where we will pass in the clicked <code>&lt;button&gt;</code>, we want to reuse that function for arrow keys too, so we just call it here, in that function we will also set the non-active tabs too</p><p>We also need a way to call the <code>handleClickOnBtns()</code> function on a <code>'click'</code> event, so we use an <code>addEventListener()</code> and listen for a <code>'click'</code> event within the <code>widgetWrapper</code> and if there is one, it will call this function.</p></div></div><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">handleClickOnBtns</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__btn'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">setActiveTab</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>widgetWrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> handleClickOnBtns<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4>Setting active and non-active tabs</h4><p>So we need a function to handle setting the active tab and displaying its corresponding panel, whilst setting all other tabs to be non-active and their corresponding panels to <code>hidden</code>, we will do this in a <code>setActiveTab()</code> function, which will accept the current <code>tab</code> a user has clicked or selected.</p><h5 class="accordion">Explainer 6</h5><div class="accordion__panel"><div><ul><li><p>We passed in the <code>target</code> element (the clicked <code>&lt;button&gt;</code>) in the previous step's call to this function</p></li><li><p>We loop through all of the tabs and check to see which one matches the <code>&lt;button&gt;</code> passed to this function, by matching the <code>tab</code> is equal to the <code>activeTab</code>, which we passed in</p><ul><li>We set <code>aria-selected=&quot;true&quot;</code> on that <code>&lt;button&gt;</code></li><li>We remove the <code>tabindex</code> attribute, as we don't need <code>tabindex=&quot;0&quot;</code> on an actual <code>&lt;button&gt;</code>, as it's already focusable</li><li>We get the exact panel that <code>&lt;button&gt;</code> controls by searching in the <code>widgetWrapper</code> and finding an element that has <code>aria-labelledby</code> where the value matches the ID of the selected <code>&lt;button&gt;</code> and we add <code>tabindex=&quot;0&quot;</code> to that panel, so it's focusable</li><li>We also remove the <code>hidden</code> attribute from the panel, because this needs to be the <code>tabpanel</code> that is displayed, we use the same <code>querySelector</code> as above</li></ul></li><li><p>In our loop we checked for the active tab in our <code>if</code> condition so the remaining tabs are the non-active tabs, so we target them with the <code>else</code> block, we're pretty much reversing what we did for the active <code>tab</code></p><ul><li>For every <code>&lt;button&gt;</code> that reaches this condition we set <code>aria-selected=&quot;false&quot;</code></li><li>We add <code>tabindex=&quot;-1&quot;</code> to each of these <code>&lt;button&gt;</code> elements, as adjacent tabs are focusable with arrows as opposed to the <kbd>Tab</kbd> key, so we want to remove the non-active tabs out of the focus order</li><li>We remove the <code>tabindex</code> attribute from each non-active <code>tabpanel</code></li><li>Finally, we add the <code>hidden</code> attribute to each non-active <code>tabpanel</code></li></ul></li></ul></div></div><pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">setActiveTab</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">activeTab</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  widgetBtns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">tab</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">===</span> activeTab<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      tab<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      tab<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tab<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tab<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      tab<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      tab<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-controls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-controls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br> <span class="token punctuation">}</span></code></pre><h4>Adding the interaction model to our widgets</h4><p>The interaction model for horizontal tabs is as follows:</p><ul><li>Only one <code>tab</code> is in the page's focus order at any given time, pressing <kbd>Tab</kbd> whilst focus is on a <code>tab</code> will move focus out of the <code>tablist</code>, in our example focus will move to the <code>tabpanel</code></li><li>Pressing <kbd>Shift</kbd> and <kbd>Tab</kbd> will also move focus out of the <code>tablist</code>, in reverse</li><li>Pressing <kbd>Shift</kbd> and <kbd>Tab</kbd> whilst focus is on a <code>tabpanel</code> will move focus back up to the active <code>tab</code></li><li>A keyboard user should be able to focus on adjacent tabs using the horizontal arrow keys, in our automatic activation implementation, focusing on any tab will make it the active <code>tab</code> and automatically display its panel</li><li>Should a user reach the last tab and press the right arrow key or they press the left arrow key whilst focus is on the first <code>tab</code>, we can either cycle back through, infinitely or just do nothing, we're going to do nothing, reaching either end of the <code>tablist</code> will be a hard stop</li><li>If a user presses <kbd>Home</kbd> whilst focus is within the <code>tablist</code>, then focus moves to the first <code>tab</code></li><li>If a user presses <kbd>End</kbd> whilst focus is within the <code>tablist</code>, then focus moves to the last <code>tab</code></li></ul><p>The interaction model for accordions is as follows:</p><ul><li><p>Pressing tab whilst focusing on an accordion button</p><ul><li>If that accordion is collapsed and there is an accordion below, then focus advances to that accordion, as any interactive elements inside the closed panel must be ignored</li><li>If that accordion is expanded and there are no interactive elements inside its panel. then focus moves to the accordion below (if present) or continues through the page, as normal</li></ul></li><li><p>Pressing <kbd>Shift</kbd> and <kbd>Tab</kbd> whilst focusing on an accordion button</p><ul><li>If there is an accordion above and it is collapsed, focus will move to that accordion, ignoring any interactive elements it may contain</li><li>if the above accordion is open and has no interactive elements, then focus will move to the above accordion (if present) or continue up the page</li></ul></li><li><p>Pressing <kbd>Tab</kbd> or pressing <kbd>Shift</kbd> and <kbd>Tab</kbd> whilst focus is inside an accordion panel</p><ul><li>If focus is on the last interactive element inside the panel and a user presses <kbd>Tab</kbd>, focus will move to the below accordion (if present), else continue down the page</li><li>If focus is on the first interactive element inside the panel and a user presses <kbd>Shift</kbd> and <kbd>Tab</kbd>, focus will move to the above accordion (if present), else continue up the page</li><li>All interactive elements within the panels should of course be focusable in a logical order, which is usually the source order of the HTML</li></ul></li><li><p>Optional interaction for accordions</p><ul><li>If a user is focused on an accordion and presses <kbd>Home</kbd> their focus moves to the first accordion in that group</li><li>If a user is focused on an accordion and presses <kbd>End</kbd> their focus moves to the last accordion in that group</li><li>If a user is focused on an accordion and presses the down arrow key, focus will move to the accordion below (if present) else we are choosing to do nothing</li><li>If a user is focused on an accordion and presses the up arrow key, focus will move to the accordion above (if present) else we are choosing to do nothing</li></ul></li></ul><p>Quite a bit to consider there, but it's not as involved as it sounds, as the browser already handles a good chunk of that, we have hidden our panels properly, so focus cannot enter them if they are not displayed. We already manage the focus by setting the appropriate <code>tabindex</code> values, where required, so we only need to add the functionality for the keys we stored in our <code>navKeys</code> array. We're going to also add the optional interaction for accordions.</p><h5 class="accordion">Explainer 7</h5><div class="accordion__panel"><div><ul><li><p>We create a function <code>handleKeyboardInteraction()</code> that accepts an event <code>evt</code> parameter</p></li><li><p>If the <code>key</code> passed from the <code>evt</code> exists in the <code>navKeys</code> array we created earlier and that <code>key</code> was pressed whilst focus was on an element with a class <code>widget__btn</code>, we'll execute the code within, otherwise, we just do nothing</p></li><li><p>We add <code>preventDefault()</code> to the event, as we want to intercept these key presses and match them to the behaviour we are providing as opposed to the user agent's</p></li><li><p>We declare a <code>currentIdx</code> variable, which has the index of the target element, which we get from its <code>data-btn-idx</code> attribute, we'll match this to the <code>widgetBtns</code> array, shortly</p></li><li><p>We don't want to write very similar code twice, we'll set a condition where if the <code>target</code> element has the <code>role</code> attribute (we know it's tabs layout), we will assign 'ArrowRight' to a <code>next</code> variable, else (we know it's accordions layout), we assign 'ArrowDown' to the <code>next</code> variable</p><ul><li>We use the same logic as above for 'ArrowLeft' and 'ArrowUp', but assigning them to a <code>prev</code> variable</li></ul></li><li><p>If the <code>evt.key</code> matches the value of our <code>next</code> variable (When tabs are present that will be the right arrow key, else accordions are present so it will be the down arrow key) and focus is not on the last button (<code>currentIdx</code> is less than <code>widgetBtns.length - 1</code> then we need to advance focus to the next button</p><ul><li>If it's a tab then we need to pass the next button to the <code>setActiveTab()</code> function and we pass in <code>widgetBtns[currentIdx + 1]</code>, which just gets the next item in the array, we also run a check that the element was a tab and then get that same indexed element and append with <code>.focus()</code></li><li>If it's an accordion, we only need to move focus to the next one if present, so we don't call a function, we just use the array index and append with <code>.focus()</code></li></ul></li><li><p>We repeat the same logic as the previous step, in reverse for when a user presses the left or up arrows, this time we are matching against the <code>prev</code> variable's value. We are checking if a user is not focused on the first button by requiring the <code>currentIdx</code> to be greater than <code>0</code> and if it is we call the <code>setActiveTab</code> function and move <code>focus()</code>, this time we don't add <code>1</code> to the array, we subtract <code>1</code></p></li><li><p>If the keys pressed were either <code>'Home'</code> or <code>'End'</code> we then determine which widget is displayed by checking whether the <code>target</code> <code>&lt;button&gt;</code> has the <code>role</code> attribute present, if it does and a user pressed <kbd>Home</kbd> pass the first item in the <code>widgetBtns</code> array to the <code>setActiveTab()</code> function, then <code>focus()</code> on the first item in the same array</p><ul><li>We repeat the above logic for the <kbd>End</kbd> key, but we pass the last item in the array to the <code>setActiveTab()</code> function and <code>focus()</code> on it if an accordion, by getting the <code>length</code> of the array and deducting <code>1</code></li></ul></li><li><p>We call this function with <code>addEventListener()</code>, we attach that to the <code>widgetWrapper</code></p></li></ul><p>That's pretty much it, our tabs and accordions have good markup, the correct ARIA and the right interaction model, they will display according to the media query set and we're almost good, there's just one more thing.</p></div></div><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">handleKeyboardInteraction</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><br>    navKeys<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__btn'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    evt<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> currentIdx <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-btn-idx'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><br>      <span class="token operator">?</span> <span class="token punctuation">(</span>next <span class="token operator">=</span> <span class="token string">'ArrowRight'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> <span class="token punctuation">(</span>next <span class="token operator">=</span> <span class="token string">'ArrowDown'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>prev <span class="token operator">=</span> <span class="token string">'ArrowLeft'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>prev <span class="token operator">=</span> <span class="token string">'ArrowUp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> next <span class="token operator">&amp;&amp;</span> currentIdx <span class="token operator">&lt;</span> widgetBtns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><br>        <span class="token operator">?</span> <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token operator">:</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> prev <span class="token operator">&amp;&amp;</span> currentIdx <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><br>        <span class="token operator">?</span> <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token operator">:</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Home'</span> <span class="token operator">&amp;&amp;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>      <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Home'</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'End'</span> <span class="token operator">&amp;&amp;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>      <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span>widgetBtns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'End'</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span>widgetBtns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>widgetControlsWrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> handleKeyboardInteraction<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4>Handling focus when the viewport changes</h4><p>Some users may be unable to read text that others find comfortable, we all have different needs and preferences, so we need to consider those circumstances where our current implementation has one issue that may be less than obvious. Let's assume we have a user that has low-vision, they open up our page and see the widget and one of the buttons contains the topic they are interested in. This user also uses a keyboard to navigate websites, as that is what works best for them. They decide they want to zoom in, to read the contents, currently in our implementation, their focus could be lost, which would be hugely frustrating for keyboard users.</p><p>This happens because we never update our <code>open</code> variable, it is just set to <code>0</code> at the top of our JS. That's OK though, as obviously we have that for a reason and now we are going to use it properly. Let's look at the three situations where we don't want the switching of patterns to become jarring, confusing or steal a user's focus:</p><ul><li>If a user's focus was on one of the buttons, irrespective of whether they were in the accordions layout or the tabs layout, the browser doesn't lose focus here, as the buttons are only modified with attributes. We want to try to make sure users don't lose their place so we will force the panel they were focused on to be the open panel. If the layout was accordions, we have to open one panel when it changes to tabs and by focusing on this <code>tab</code>, it automatically becomes the selected <code>tab</code>, so it has be this one and if a user was viewing the tabs layout, that <code>tab</code> was selected so we'll just expand that accordion for them</li><li>If a user was focused on a <code>tabpanel</code> (as they're focusable), we cannot send focus to the relevant accordion panel as accordion panels are not focusable. So the sensible solution is to send focus back one step, to its controlling <code>&lt;button&gt;</code> and we'll expand that accordion as it was open in the tabs layout (if we didn't do this, focus would be lost to the <code>&lt;body&gt;</code> as that element is no longer focusable)</li><li>Finally, the only other place focus could have been was inside a panel, in which case that panel was open and a user's focus position needs to be maintained, so we just detect which panel was open and force that to be open in whichever layout the user triggered. We then return focus to the initial position (currently focus is lost to the <code>&lt;body&gt;</code> as we hoist the panels around and I guess for a fraction of a nanosecond, they don't exist so focus is lost?)</li></ul><p>It is of course possible that a user had multiple accordions open, but we can't do anything about that, as our tabs can only have one panel open. We do all of the above simply by detecting where focus was and getting a reference to that element or its closest ancestor that matches a given query. We can use the data attributes <code>data-btn-idx</code> and <code>data-panel-idx</code>, we added earlier. We then update the value of our <code>open</code> variable to force whichever panel that meets one of our three conditions to be open. We also store a reference to a user's current focus position and we only do anything about that if their focus was inside our <code>widgetWrapper</code>, as this is where we kinda broke the way a browser manages that.</p><p>We'll update our <code>mq.addEventListener()</code> method as this is the only time we need to concern ourselves with this change.</p><h5 class="accordion">Explainer 8</h5><div class="accordion__panel"><div><ul><li>First we will initialise a variable to get the currently focused element using the <code>document.activeElement</code> property, we'll call this variable <code>currentFocus</code></li><li>Then we will check that focus was in inside the <code>widgetWrapper</code> by checking if the <code>currentFocus</code> variable has an ancestor with the class <code>widget__wrapper</code>, using the <code>closest()</code> method</li><li>The first condition simply checks whether <code>currentFocus</code> is an element that has a class <code>widget__btn</code>, if it does we'll get the value of its <code>data-btn-idx</code> attribute, convert it from a string to a <code>Number()</code> and set <code>open</code> to that value</li><li>The second condition checks whether <code>currentFocus</code> has a class that is <code>widget__panel</code>, if it does we set the value of <code>open</code> to the value of <code>data-panel-idx</code> (the button and panel always have the same value for these attributes), again we convert it to a <code>Number()</code> first</li><li>The final condition detects whether focus was inside a panel by checking if there is an ancestor with the class <code>widget__panel</code>, if there was, get that <code>closest()</code> element with the class <code>widget__panel</code> and then get the value from its <code>data-panel-idx</code> attribute, convert it to a <code>Number()</code> and set it as the value of the <code>open</code> variable</li><li>At the bottom of the function, outside of the loop we set <code>focus()</code> back on to the element that previously had <code>focus()</code>, which we of course stored in our <code>currentFocus</code> variable.</li></ul><p>That does it for the JS, finally. We covered quite a bit and sorry if I over-explained, I'm sure you skimmed past everything that you already knew, I was also trying to cater for folks who may be new to JS or A11y. Maybe I'll put the step-by-step stuff in accordions, definitely not tabs though.</p></div></div><pre class="language-javascript"><code class="language-javascript">mq<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">evt</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// New code below</span><br>  <span class="token keyword">let</span> currentFocus <span class="token operator">=</span> document<span class="token punctuation">.</span>activeElement<span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.widget__wrapper'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__btn'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      open <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-btn-idx'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__panel'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      open <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-panel-idx'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      currentFocus <span class="token operator">=</span> widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[data-btn-idx="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>open<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.widget__panel'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      open <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><br>        currentFocus<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.widget__panel'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-panel-idx'</span><span class="token punctuation">)</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  <span class="token comment">// New code above</span><br>  mq<span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token function">createAccordions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">createTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// New code below</span><br>  currentFocus<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3>Now, let's style um</h3><p>I'm not going to explain the CSS, as this has guide has already taken forever to write, I will of course provide the completed code at the end and I'll just summarise what we need in the bullets below: I'm also not going to great lengths to make them look good, they'll just look OK and I'm not animating their expanding or collapsing.</p><ul><li>We either need a media query in CSS that matches our media query in JS or we just use the attributes as styling hooks, I'm just going to use the attributes, but a media query would be safer on a real site</li><li>We need to style the <code>&lt;details&gt;</code> &amp; <code>&lt;summary&gt;</code> elements so they look decent where JS isn't available, we also need to ensure they have a focus indicator</li><li>We need to make our accordions look like accordions and they will need a focus indicator</li><li>Our tabs need to look like something a user can operate and we need a focus indicator, along with a selected indicator</li><li>Our tabpanels need a focus indicator too, as the active panel has <code>tabindex=&quot;0&quot;</code> set, so we need to show keyboard users where they are</li><li>We need to consider Windows High Contrast Mode, which will ignore a couple of background colours I had set</li></ul><p>I genuinely haven't taken much time to style these, I would of course do better for an actual site. The High Contrast Mode focus indicators could definitely be improved and the CSS would be better if I used classes and media queries, as I'm currently using attributes, which may be present elsewhere on a page. This wasn't a styling exercise, just a proof of concept, please feel free to style your version much nicer.</p><div class="cms__anchor-wrapper"><h2 id="codepen" tabindex="-1">Codepen</h2><a class="cms__anchor flex--middle" href="#codepen" aria-labelledby="codepen"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p class="codepen" data-height="300" data-preview="true" data-theme-id="dark" data-default-tab="css,result" data-slug-hash="ExrRyJp" data-user="LDAWG-a11y" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;"><span>See the Pen <a href="https://codepen.io/LDAWG-a11y/pen/ExrRyJp">Responsive Accessible Tabs</a> by LDAWG-a11y (<a href="https://codepen.io/LDAWG-a11y">@LDAWG-a11y</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script><div class="cms__anchor-wrapper"><h2 id="wrapping-up" tabindex="-1">Wrapping up</h2><a class="cms__anchor flex--middle" href="#wrapping-up" aria-labelledby="wrapping-up"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>Is it worth the effort to wrangle the DOM to provide a user with either tabs or accordions depending on their viewport size? Well, it took us just over 130 lines of JS to do that and I have no doubt that could be further reduced by a JS ninja. In this example though we have taken a <code>&lt;details&gt;</code> &amp; <code>&lt;summary&gt;</code> element and progressively enhanced it, providing ARIA accordions for the smaller viewport breakpoint and ARIA tabs for the larger viewport breakpoint. We did so with all of the correct ARIA and interaction patterns and we even considered managing focus when a user triggers the <code>'change'</code> event for the media query, so we have pretty much covered everything here.</p><p>I'm not personally a fan of tabs, not because I find them difficult to use, but because they typically only appear suited to larger viewports, they just don't seem suited to smaller viewports, but that's just my view. Accordions, however, work on all screen sizes, so my preference would be to just use accordions, which would be much simpler in those cases where we want to hide some content until a user exposes it. We don't always get the choice though, sometimes we have to work with what we have. So, maybe when we find ourselves in a situation where tabs are staying put, then this approach could be an alternative to Heydon's or Andy's solutions? I'm not saying my solution is as good as either of theirs, I just wanted to provide a different solution, because the tabs problem actually comes up quite often, usually when we encounter them though, they don't have the correct interaction model and often the ARIA is wrong or not present at all.</p><p>If you have a site that hardly has any JS and loads fast anyway, then this solution should only have a minimal impact, performance wise.</p><p>Whether you choose to use or improve this pattern yourself, always test, I have tested my own work, but disclaimer, I've only done so with the latest browsers and assistive tech pairings.</p><div class="cms__anchor-wrapper"><h2 id="screenshots" tabindex="-1">Screenshots</h2><a class="cms__anchor flex--middle" href="#screenshots" aria-labelledby="screenshots"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><h3>The no JS solution, using <code>&lt;details&gt;</code> &amp; <code>&lt;summary&gt;</code></h3><p><picture><source type="image/webp" srcset="/guideImg/mKt4pGXSZX-300.webp 300w, /guideImg/mKt4pGXSZX-600.webp 600w" sizes="100vw"><source type="image/png" srcset="/guideImg/mKt4pGXSZX-300.png 300w, /guideImg/mKt4pGXSZX-600.png 600w" sizes="100vw"><img class="guide__image" decoding="async" loading="lazy" alt="Screenshot of the Details and Summary elements which are provided to users where JavaScript is unavailable, disabled or doesn't load. The first panel is open, they have minimal styling, using the rebeccapurple colour for their borders and the text in the Summary element" src="/guideImg/mKt4pGXSZX-300.png" width="600" height="217"></picture></p><h3>The smaller viewport solution: accordions</h3><p><picture><source type="image/webp" srcset="/guideImg/X-F1QZL9LD-300.webp 300w, /guideImg/X-F1QZL9LD-600.webp 600w" sizes="100vw"><source type="image/png" srcset="/guideImg/X-F1QZL9LD-300.png 300w, /guideImg/X-F1QZL9LD-600.png 600w" sizes="100vw"><img class="guide__image" decoding="async" loading="lazy" alt="Screenshot of the accordions, which display on smaller viewports, the first panel is expanded, each accordion has an icon, which is a minus if expanded and a plus if collapsed. They have minimal styling, using the rebeccapurple colour for their borders and the button text" src="/guideImg/X-F1QZL9LD-300.png" width="600" height="224"></picture></p><h3>The larger viewport, showing the tabs</h3><p><picture><source type="image/webp" srcset="/guideImg/x9XiFCSxkD-300.webp 300w, /guideImg/x9XiFCSxkD-600.webp 600w" sizes="100vw"><source type="image/png" srcset="/guideImg/x9XiFCSxkD-300.png 300w, /guideImg/x9XiFCSxkD-600.png 600w" sizes="100vw"><img class="guide__image" decoding="async" loading="lazy" alt="Screenshot of the tabs, which displays on the larger viewport. The first tab is selected and there is a thicker border at the top of the tab to show this, in addition, there is no bottom border on the tab, so it flows into its associated panel. They have minimal styling, using the rebeccapurple colour for their borders, the thicker border for the selected tab and the button text" src="/guideImg/x9XiFCSxkD-300.png" width="600" height="159"></picture></p><h3>Windows High Contrast Mode</h3><h4>No JS <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> solution</h4><p><picture><source type="image/webp" srcset="/guideImg/1bvwQVfJ2P-300.webp 300w, /guideImg/1bvwQVfJ2P-600.webp 600w" sizes="100vw"><source type="image/png" srcset="/guideImg/1bvwQVfJ2P-300.png 300w, /guideImg/1bvwQVfJ2P-600.png 600w" sizes="100vw"><img class="guide__image" decoding="async" loading="lazy" alt="Screenshot of the Details and Summary elements in High Contrast Mode. the second panel has focus and is expanded, there is a focus indicator present, which is 3px thick and no information is lost" src="/guideImg/1bvwQVfJ2P-300.png" width="600" height="209"></picture></p><h4>Accordions solution</h4><p><picture><source type="image/webp" srcset="/guideImg/NmAorSbjjx-300.webp 300w, /guideImg/NmAorSbjjx-600.webp 600w" sizes="100vw"><source type="image/png" srcset="/guideImg/NmAorSbjjx-300.png 300w, /guideImg/NmAorSbjjx-600.png 600w" sizes="100vw"><img class="guide__image" decoding="async" loading="lazy" alt="Screenshot of the accordions in High Contrast Mode. The first accordion has focus and a thick focus indicator is present, the second accordion is expanded, the plus and minus icons that indicate the collapsed or expanded states are present" src="/guideImg/NmAorSbjjx-300.png" width="600" height="389"></picture></p><h4>Tabs solution</h4><p><picture><source type="image/webp" srcset="/guideImg/I0eqjokmD9-300.webp 300w, /guideImg/I0eqjokmD9-600.webp 600w" sizes="100vw"><source type="image/png" srcset="/guideImg/I0eqjokmD9-300.png 300w, /guideImg/I0eqjokmD9-600.png 600w" sizes="100vw"><img class="guide__image" decoding="async" loading="lazy" alt="Screenshot of the tabs layout in High Contrast Mode. The 3rd and final tab is selected and its panel is displayed. The selected panel indicator is a thick top border on the selected tab, which is present, there is also a focus indicator which surrounds the text." src="/guideImg/I0eqjokmD9-300.png" width="600" height="140"></picture></p><div class="cms__anchor-wrapper"><h2 id="completed-code" tabindex="-1">Completed code</h2><a class="cms__anchor flex--middle" href="#completed-code" aria-labelledby="completed-code"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><h3>HTML full code</h3><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>widget__wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>details</span> <span class="token attr-name">open</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">></span></span>Widget 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Widget 1 contents: Lorem ipsum dolor sit amet consectetur adipisicing<br>        elit. Porro quasi ab, error fugiat at, maiores enim impedit cumque<br>        quidem similique et laborum aliquam modi assumenda officiis est!<br>        Sapiente, non neque! <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Test 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>details</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>details</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">></span></span>Widget 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Widget 2 contents: Lorem ipsum dolor sit amet consectetur, adipisicing<br>        elit. Numquam molestias nostrum repudiandae, quaerat alias iste placeat<br>        at a, sequi deserunt iure praesentium velit repellendus ipsum culpa<br>        ratione soluta eius magni quasi fugiat repellat necessitatibus fugit.<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Test 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>details</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>details</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">></span></span>Widget 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>        Widget 3 contents: Lorem ipsum dolor sit amet consectetur, adipisicing<br>        elit. Est illo hic vitae tenetur omnis laborum itaque vero adipisci<br>        doloremque optio ullam, vel similique aliquam quo! <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Test 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>details</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h3>JavaScript full code</h3><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> widgetWrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.widget__wrapper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> baseHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span><br>  open <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> mq <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(max-width: 767px)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> navKeys <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token string">'ArrowUp'</span><span class="token punctuation">,</span><br>  <span class="token string">'ArrowRight'</span><span class="token punctuation">,</span><br>  <span class="token string">'ArrowDown'</span><span class="token punctuation">,</span><br>  <span class="token string">'ArrowLeft'</span><span class="token punctuation">,</span><br>  <span class="token string">'Home'</span><span class="token punctuation">,</span><br>  <span class="token string">'End'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'details'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  baseHTML <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h3 class="widget__heading"><br>    &lt;button class="widget__btn" id="btn-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>      idx <span class="token operator">+</span> <span class="token number">1</span><br>    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" data-btn-idx="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" aria-controls="panel-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>    el<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">.</span>textContent<br>  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/button>&lt;/h3><br>    &lt;div class="widget__panel" id="panel-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>      idx <span class="token operator">+</span> <span class="token number">1</span><br>    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" data-panel-idx="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" aria-labelledby="btn-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><br>    el<span class="token punctuation">.</span>lastElementChild<span class="token punctuation">.</span>innerHTML<br>  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>baseHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class="widget__controls-wrapper"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseHTML<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><br>widgetWrapper<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br>widgetWrapper<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">'afterbegin'</span><span class="token punctuation">,</span> baseHTML<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> widgetControlsWrapper <span class="token operator">=</span> widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><br>  <span class="token string">'.widget__controls-wrapper'</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> widgetBtns <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.widget__btn'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> widgetPanels <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><br>  widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.widget__panel'</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">createAccordions</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  widgetControlsWrapper<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  widgetBtns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">btn<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-setsize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-posinset'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><br>      widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>btn<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  widgetPanels<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">panel</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'region'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    panel<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    panel<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">createTabs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  widgetControlsWrapper<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'tablist'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  widgetBtns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">btn<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'presentation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'tab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-setsize'</span><span class="token punctuation">,</span> widgetBtns<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-posinset'</span><span class="token punctuation">,</span> idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">!==</span> open<span class="token punctuation">)</span> btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    btn<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  widgetPanels<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">panel<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'tabpanel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    idx <span class="token operator">===</span> open<br>      <span class="token operator">?</span> panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> panel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  widgetPanels<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> widgetControlsWrapper<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">handleClickOnBtns</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__btn'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-expanded'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">setActiveTab</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token function-variable function">setActiveTab</span> <span class="token operator">=</span> <span class="token parameter">activeTab</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  widgetBtns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">tab</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">===</span> activeTab<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      tab<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      tab<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      widgetWrapper<br>        <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tab<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      widgetWrapper<br>        <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[aria-labelledby="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tab<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      tab<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-selected'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      tab<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      document<br>        <span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-controls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      document<br>        <span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-controls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'hidden'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">handleKeyboardInteraction</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><br>    navKeys<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__btn'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    evt<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> currentIdx <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-btn-idx'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><br>      <span class="token operator">?</span> <span class="token punctuation">(</span>next <span class="token operator">=</span> <span class="token string">'ArrowRight'</span><span class="token punctuation">)</span><br>      <span class="token operator">:</span> <span class="token punctuation">(</span>next <span class="token operator">=</span> <span class="token string">'ArrowDown'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>prev <span class="token operator">=</span> <span class="token string">'ArrowLeft'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>prev <span class="token operator">=</span> <span class="token string">'ArrowUp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> next <span class="token operator">&amp;&amp;</span> currentIdx <span class="token operator">&lt;</span> widgetBtns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><br>        <span class="token operator">?</span> <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token operator">:</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> prev <span class="token operator">&amp;&amp;</span> currentIdx <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><br>        <span class="token operator">?</span> <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token operator">:</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span>currentIdx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Home'</span> <span class="token operator">&amp;&amp;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>      <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'Home'</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'End'</span> <span class="token operator">&amp;&amp;</span> evt<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>      <span class="token function">setActiveTab</span><span class="token punctuation">(</span>widgetBtns<span class="token punctuation">[</span>widgetBtns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>evt<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">'End'</span><span class="token punctuation">)</span> widgetBtns<span class="token punctuation">[</span>widgetBtns<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token parameter">evt</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  mq<span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token function">createAccordions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">createTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>mq<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token parameter">evt</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> currentFocus <span class="token operator">=</span> document<span class="token punctuation">.</span>activeElement<span class="token punctuation">;</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.widget__wrapper'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__btn'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      open <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-btn-idx'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'widget__panel'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      open <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-panel-idx'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      currentFocus <span class="token operator">=</span> widgetWrapper<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[data-btn-idx="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>open<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>currentFocus<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.widget__panel'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      open <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><br>        currentFocus<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.widget__panel'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-panel-idx'</span><span class="token punctuation">)</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  mq<span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token function">createAccordions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">createTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  currentFocus<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>widgetWrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> handleClickOnBtns<span class="token punctuation">)</span><span class="token punctuation">;</span><br>widgetWrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> handleKeyboardInteraction<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3>CSS full code (Basic styling)</h3><pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--colour-interactive</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span><br>  <span class="token property">--colour-bg</span><span class="token punctuation">:</span> #f1f1f1<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">*,<br>*::before,<br>*::after</span> <span class="token punctuation">{</span><br>  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span><br>  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">body</span> <span class="token punctuation">{</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>  <span class="token property">max-width</span><span class="token punctuation">:</span> 50rem<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span><br>  <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> #202020<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">details</span> <span class="token punctuation">{</span><br>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">details div</span> <span class="token punctuation">{</span><br>  <span class="token property">border-top</span><span class="token punctuation">:</span> 2px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">summary</span> <span class="token punctuation">{</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 8px 10px<span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">summary:focus-visible</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">outline</span><span class="token punctuation">:</span> 2px solid transparent<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 8px 10px<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span><br>  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn[aria-expanded]</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>  <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn[aria-expanded]::before,<br>.widget__btn[aria-expanded]::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn[aria-expanded]::before</span> <span class="token punctuation">{</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span><br>  <span class="token property">transition</span><span class="token punctuation">:</span> transform ease 200ms<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn[aria-expanded]::after</span> <span class="token punctuation">{</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn[aria-expanded='true']::before</span> <span class="token punctuation">{</span><br>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn[aria-expanded]:focus-visible</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">outline</span><span class="token punctuation">:</span> 2px solid transparent<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__btn[aria-expanded]:focus-visible::before,<br>.widget__btn[aria-expanded]:focus-visible::after</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.widget__panel[role='region']</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>  <span class="token property">top</span><span class="token punctuation">:</span> -2px<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-top</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tablist']</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">gap</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tab']</span> <span class="token punctuation">{</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px 3px 0 0<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tab'][aria-selected='true']::before,<br>[role='tab'][aria-selected='true']::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tab'][aria-selected='true']::before</span> <span class="token punctuation">{</span><br>  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">border-top</span><span class="token punctuation">:</span> 3px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tab'][aria-selected='true']::after</span> <span class="token punctuation">{</span><br>  <span class="token property">bottom</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tabpanel']</span> <span class="token punctuation">{</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tab']:focus-visible</span> <span class="token punctuation">{</span><br>  <span class="token property">outline</span><span class="token punctuation">:</span> 2px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">outline-offset</span><span class="token punctuation">:</span> -8px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[role='tabpanel']:focus-visible</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>  <span class="token property">outline</span><span class="token punctuation">:</span> 2px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[hidden],<br>[data-expanded='false'] + .widget__panel</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">forced-colors</span><span class="token punctuation">:</span> active<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>  <span class="token selector">.widget__btn[aria-expanded]::before,<br>  .widget__btn[aria-expanded]::after</span> <span class="token punctuation">{</span><br>    <span class="token property">background-color</span><span class="token punctuation">:</span> ButtonText<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><br>  <span class="token selector">[role='tab'][aria-selected='true']::after</span> <span class="token punctuation">{</span><br>    <span class="token property">background-color</span><span class="token punctuation">:</span> Window<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></article><div class="socials__container" role="group" aria-labelledby="shareTitle"><h2 class="socials__title" id="shareTitle" data-no-accent>Share on:</h2><a href="//twitter.com/intent/tweet?text=Responsive%20%26%20accessible%20tabbed%20interfaces&url=https://www.makethingsaccessible.com/guides/responsive-and-accessible-tabbed-interfaces/" class="socials__link flex--middle"><span class="visually-hidden">Twitter</span><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 0 0 1.88-2.38c-.83.5-1.75.85-2.72 1.05a4.28 4.28 0 0 0-7.32 3.91A12.2 12.2 0 0 1 3 4.79a4.24 4.24 0 0 0 1.33 5.71c-.71 0-1.37-.2-1.95-.5v.03a4.3 4.3 0 0 0 3.44 4.21 4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06A12.14 12.14 0 0 0 8.12 21C16 21 20.33 14.46 20.33 8.79l-.01-.56A8.57 8.57 0 0 0 22.46 6Z"/></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.makethingsaccessible.com/guides/responsive-and-accessible-tabbed-interfaces/&title=Responsive%20%26%20accessible%20tabbed%20interfaces" class="socials__link flex--middle"><span class="visually-hidden">LinkedIn</span><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M1 2.84A1.84 1.84 0 0 1 2.84 1h18.32A1.84 1.84 0 0 1 23 2.84v18.32A1.84 1.84 0 0 1 21.16 23H2.84A1.84 1.84 0 0 1 1 21.16V2.84Zm8.7 6.55h2.99v1.5c.43-.87 1.53-1.64 3.18-1.64 3.17 0 3.92 1.71 3.92 4.86v5.82h-3.2v-5.1c0-1.8-.44-2.8-1.53-2.8-1.51 0-2.14 1.08-2.14 2.8v5.1H9.7V9.39Zm-5.5 10.4h3.22V9.25H4.2v10.54ZM7.88 5.81a2.06 2.06 0 1 1-4.12 0 2.06 2.06 0 0 1 4.13 0Z" clip-rule="evenodd"/></svg></a></div><aside class="author-bio panel gutter-btm--major"><a class="skip-link--static" href="#guideStart">Skip bio</a><div class="author-bio--upper"><h2 class="author-bio__title">About Darren</h2></div><div class="author-bio--lower"><div class="author-bio__intro"><p>Darren is both a digital accessibility analyst and a frontend web developer who focuses on building accessible, performant and intuitive websites. Darren is the developer for this platform and he built it with an accessibility-first approach, applying all of his knowledge of accessible web interfaces through each stage of the project.</p></div><dl class="author-bio__meta"><div class="author-bio__items-wrapper"><dt class="author-bio__term">Position:</dt><dd class="author-bio__description">Digital Accessibility Analyst</dd></div><div class="author-bio__items-wrapper"><dt class="author-bio__term">Organisation:</dt><dd class="author-bio__description">University of Westminster</dd></div><div class="author-bio__items-wrapper"><dt class="author-bio__term"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 0 0 1.88-2.38c-.83.5-1.75.85-2.72 1.05a4.28 4.28 0 0 0-7.32 3.91A12.2 12.2 0 0 1 3 4.79a4.24 4.24 0 0 0 1.33 5.71c-.71 0-1.37-.2-1.95-.5v.03a4.3 4.3 0 0 0 3.44 4.21 4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06A12.14 12.14 0 0 0 8.12 21C16 21 20.33 14.46 20.33 8.79l-.01-.56A8.57 8.57 0 0 0 22.46 6Z"/></svg><span class="visually-hidden">Twitter:</span></dt><dd class="author-bio__description"><a href="https://twitter.com/daz079" class="author-bio__link">@daz079</a></dd></div><div class="author-bio__items-wrapper"><dt class="author-bio__term"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M1 2.84A1.84 1.84 0 0 1 2.84 1h18.32A1.84 1.84 0 0 1 23 2.84v18.32A1.84 1.84 0 0 1 21.16 23H2.84A1.84 1.84 0 0 1 1 21.16V2.84Zm8.7 6.55h2.99v1.5c.43-.87 1.53-1.64 3.18-1.64 3.17 0 3.92 1.71 3.92 4.86v5.82h-3.2v-5.1c0-1.8-.44-2.8-1.53-2.8-1.51 0-2.14 1.08-2.14 2.8v5.1H9.7V9.39Zm-5.5 10.4h3.22V9.25H4.2v10.54ZM7.88 5.81a2.06 2.06 0 1 1-4.12 0 2.06 2.06 0 0 1 4.13 0Z" clip-rule="evenodd"/></svg><span class="visually-hidden">LinkedIn:</span></dt><dd class="author-bio__description"><a href="https://www.linkedin.com/in/darren-lee-224334147" class="author-bio__link">/in/darren-lee-224334147</a></dd></div></dl></div></aside></main><footer class="footer"><div class="footer__contact-us"><h2 data-no-accent>Contact us</h2><div class="footer__contact"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 0 0 1.88-2.38c-.83.5-1.75.85-2.72 1.05a4.28 4.28 0 0 0-7.32 3.91A12.2 12.2 0 0 1 3 4.79a4.24 4.24 0 0 0 1.33 5.71c-.71 0-1.37-.2-1.95-.5v.03a4.3 4.3 0 0 0 3.44 4.21 4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06A12.14 12.14 0 0 0 8.12 21C16 21 20.33 14.46 20.33 8.79l-.01-.56A8.57 8.57 0 0 0 22.46 6Z"/></svg> <a class="footer__link" href="https://twitter.com/MTAccessible?s=20&t=x69yq8wMBQ4y5j6byafhyw" class="">Find us on Twitter</a></div><div class="footer__contact"><svg focusable="false" aria-hidden="true" width="24px" height="24px" viewBox="0 0 24 24"><path fill="currentColor" d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg> <span class="visually-hidden">Email: </span><a class="footer__link" href="mailto:info@makethingsaccessible.com">info@makethingsaccessible.com</a></div></div><div class="footer__bottom"><div class="footer__help"><h2 data-no-accent>Need help?</h2><p class="footer__help-text">If you have trouble with accessing any part of our site or links, please let us know and one of our experienced team will identify and resolve the problem. If any part of the site does not work as intended with your assistive technology, please provide details of the browser, assistive technology you're using, and the URL wherever possible.</p></div><div class="footer__mta-links"><h2 data-no-accent>Make Things Accessible links</h2><ul class="footer__list"><li class="footer__list-item"><a class="footer__link" href="/">Home</a></li><li class="footer__list-item"><a class="footer__link" href="/about/">About</a></li><li class="footer__list-item"><a class="footer__link" href="/guides/">Guides</a></li><li class="footer__list-item"><a class="footer__link" href="/faqs/">FAQs</a></li><li class="footer__list-item"><a class="footer__link" href="/accessibility/">Accessibility</a></li><li class="footer__list-item"><a class="footer__link" href="/glossary/">Glossary</a></li><li class="footer__list-item"><a class="footer__link" href="/privacy/">Privacy Policy</a></li><li class="footer__list-item"><a class="footer__link" href="/sitemapNav/">Sitemap</a></li><li class="footer__list-item"><a class="footer__link" href="/codeOfConduct">Code of Conduct</a></li><li class="footer__list-item"><a class="footer__link" href="/contributing">Contributing</a></li><li class="footer__list-item"><a class="footer__link" href="/admin">Admin</a></li></ul></div><div class="footer__collabs"><h2 data-no-accent>Access and Assistance for All</h2><ul class="footer__list--collabs"><li class="footer__list-item"><a class="footer__link" href="/aaa/">AAA Home</a></li><li class="footer__list-item"><a class="footer__link" href="/aaa/roles/">AAA Roles</a></li><li class="footer__list-item"><a class="footer__link" href="/aaa/student-stories/">AAA Student Stories</a></li><li class="footer__list-item"><a class="footer__link" href="/aaa/supporters/">AAA Supporters</a></li></ul></div><div class="footer__colophon"><p>&copy; 2024 Make Things Accessible (v2.0) - powered by <a class="footer__link colophon__link" href="https://www.netlify.com/">Netlify</a> & <a class="footer__link colophon__link" href="https://www.11ty.dev/">11ty</a></p></div></div></footer><dialog class="dialog" id="settingsModal"><header class="dialog__header"><h1 class="dialog__title" tabindex="-1" autofocus>Site preferences</h1></header><div class="dialog__content"><p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Iusto maiores magni veritatis eligendi! Labore accusamus magnam aspernatur totam, inventore nisi!</p><p>Excepturi officia rerum, quae totam debitis aliquid delectus perspiciatis laudantium mollitia temporibus corrupti optio odit in veniam exercitationem maiores hic!</p><p>Cumque natus, id distinctio, deserunt odit facere, aliquid quae veniam quo adipisci alias corrupti fugiat dicta ratione itaque delectus rerum!</p><h2 class="dialog__subtitle">Theming</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Theme</legend><div class="settings__btns-wrapper"><button class="settings__btn--theme-light btn btn--default" aria-pressed="false" data-pref="theme light">Light<span></span></button> <button class="settings__btn--theme-unset btn btn--default" aria-pressed="false" data-pref="theme unset">Unset<span></span></button> <button class="settings__btn--theme-dark btn btn--default" aria-pressed="false" data-pref="theme dark">Dark<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Code block theme</legend><div class="settings__btns-wrapper"><button class="settings__btn--code-theme-dark btn btn--default" aria-pressed="false" data-pref="code-theme dark">Dark<span></span></button> <button class="settings__btn--code-theme-unset btn btn--default" aria-pressed="false" data-pref="code-theme unset">Unset<span></span></button> <button class="settings__btn--code-theme-light btn btn--default" aria-pressed="false" data-pref="code-theme light">Light<span></span></button> <button class="settings__btn--code-theme-lower btn btn--default" aria-pressed="false" data-pref="code-theme lower">Light 2<span></span></button></div></fieldset></div><h2 class="dialog__subtitle">Motion</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Motion & animation</legend><h3 class="accordion">Motion & animation help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): Obeys device settings, if present. If no preference is set, there are subtle animations on this site which will be shown. If you have opted for reduce motion, smooth scrolling as well as expanding and collapsing animations will no longer be present, fading transtitions and micro animations will still be still present.</li><li>None: All animations and transitions are completely removed, including fade transitions.</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--motion-unset btn btn--default" aria-pressed="false" data-pref="motion unset">Unset<span></span></button> <button class="settings__btn--motion-none btn btn--default" aria-pressed="false" data-pref="motion none">None<span></span></button></div></fieldset></div><h2 class="dialog__subtitle">Links</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Underline all links</legend><h3 class="accordion">Underline all links help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): Most links are underlined, with a few exceptions such as: the top level links in the main navigation (on large screens), cards, tags and image or icon links.</li><li>Yes: Will add underlines to the exceptions outlined above, resulting in every link being underlined</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--underline-unset btn btn--default" aria-pressed="false" data-pref="underline unset">Unset<span></span></button> <button class="settings__btn--underline-yes btn btn--default" aria-pressed="false" data-pref="underline yes">Yes<span></span></button></div></fieldset></div><h2 class="dialog__subtitle">Text and paragraphs</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Font size (main content)</legend><h3 class="accordion">Font size help</h3><div class="accordion__panel"><div><p>This setting does not apply to the site's header or footer regions</p><ul><li>Default (Unset): Font sizes are set to site defaults</li><li>Selecting Large or Largest will increase the font size of the main content, the size of the increase depends on various factors such as your display size and/or zoom level. The easiest way to determine which option suits you best would be to view this text after clicking either size's button</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--f-size-large btn btn--default" aria-pressed="false" data-pref="f-size large">Large<span></span></button> <button class="settings__btn--f-size-unset btn btn--default" aria-pressed="false" data-pref="f-size unset">Unset<span></span></button> <button class="settings__btn--f-size-largest btn btn--default" aria-pressed="false" data-pref="f-size largest">Largest<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Letter spacing</legend><h3 class="accordion">Letter spacing help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): has no modifications to letter spacing present</li><li>Increased: Multiplies the font size by 0.12 and adds the sum as spacing between each character</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--l-spacing-unset btn btn--default" aria-pressed="false" data-pref="l-spacing unset">Unset<span></span></button> <button class="settings__btn--l-spacing-increased btn btn--default" aria-pressed="false" data-pref="l-spacing increased">Increased<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Line height</legend><h3 class="accordion">Line height help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): all text has a minimum line height of 1.5 times the size of the text</li><li>Increased: all text has a line height of twice the size of the text</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--l-height-unset btn btn--default" aria-pressed="false" data-pref="l-height unset">Unset<span></span></button> <button class="settings__btn--l-height-increased btn btn--default" aria-pressed="false" data-pref="l-height increased">Increased<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Paragraph spacing</legend><h3 class="accordion">Paragraph spacing help</h3><div class="accordion__panel"><div><summary>Paragraph spacing help</summary><ul><li>Default (Unset): The space between paragraphs is equivalent to 1.5 times the height of the paragraph's text</li><li>Increased: The space between paragraphs is equivalent to 2.25 times the height of the paragraph's text</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--p-spacing-unset btn btn--default" aria-pressed="false" data-pref="p-spacing unset">Unset<span></span></button> <button class="settings__btn--p-spacing-increased btn btn--default" aria-pressed="false" data-pref="p-spacing increased">Increased<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Word spacing preference</legend><h3 class="accordion">Word spacing help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): No modifications to word spacing are present</li><li>Increased: Spaces between words are equivalent to 0.16 times the font size</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--w-spacing-unset btn btn--default" aria-pressed="false" data-pref="w-spacing unset">Unset<span></span></button> <button class="settings__btn--w-spacing-increased btn btn--default" aria-pressed="false" data-pref="w-spacing increased">Increased<span></span></button></div></fieldset></div></div><footer class="dialog__footer"><button class="dialog__close-btn btn btn--on-primary" id="modalCloseBtn"><span>Close</span></button></footer></dialog><script src="/js/search.js" type="module"></script><script>const settingsModal=document.querySelector("#settingsModal"),modalCloseBtn=settingsModal.querySelector("#modalCloseBtn"),prefsBtns=settingsModal.querySelectorAll('button[class^="settings__btn"]'),prefsModalBtn=document.querySelector("#prefsBtn"),accordions=document.querySelectorAll(".accordion"),navBtn=document.querySelector("#navBtn"),collabBtn=document.querySelector("#collabBtn"),expandAll=document.querySelector(".accs__toggle--expand-all"),collapseAll=document.querySelector(".accs__toggle--collapse-all"),accsContainer=document.querySelector(".accs__container"),toggleBool=(e,t,a)=>{a||(a="false"===e.getAttribute(t)?"true":"false"),e.getAttribute(t),e.setAttribute(t,a)};if(accordions.forEach(((e,t)=>{const a=e.innerText,l=e.nextElementSibling;let o="false";e.closest("[data-pre-expanded]")&&(console.log("hit"),o="true"),e.setAttribute("data-no-accent",""),l.id=`accPanel-${t+1}`,e.innerHTML=`<button class="accordion__btn" id="acc-${t+1}"\n  aria-controls="accPanel-${t+1}"\n  aria-expanded="${o}">${a}</button>`;let n=e.firstElementChild;e.setAttribute("data-open",`${o}`),n.addEventListener("click",(()=>{toggleBool(n,"aria-expanded"),toggleBool(n.parentElement,"data-open")}))})),accordions.forEach((e=>{const t=e.nextElementSibling;t.nextElementSibling&&t.nextElementSibling.hasAttribute("data-open")||t.setAttribute("data-last",""),e.previousElementSibling&&e.previousElementSibling.classList.contains("accordion__panel")||e.nextElementSibling.setAttribute("data-first",""),t.hasAttribute("data-first")&&t.hasAttribute("data-last")?(t.removeAttribute("data-last"),t.removeAttribute("data-first"),t.previousElementSibling.classList.add("accordion--single")):t.previousElementSibling.classList.add("accordion--multiple")})),accsContainer){const e=accsContainer.querySelectorAll(".accordion");collapseAll.setAttribute("aria-pressed","true"),accsContainer.addEventListener("click",(t=>{let a;if(t.target.hasAttribute("aria-pressed")&&(t.target===expandAll?(a="true",expandAll.setAttribute("aria-pressed","true"),collapseAll.setAttribute("aria-pressed","false")):t.target===collapseAll&&(a="false",collapseAll.setAttribute("aria-pressed","true"),expandAll.setAttribute("aria-pressed","false")),e.forEach((e=>{toggleBool(e,"data-open",a),toggleBool(e.firstElementChild,"aria-expanded",a)}))),t.target.classList.contains("accordion__btn")){let t=accsContainer.querySelectorAll('.accordion__btn[aria-expanded="true"]');t.length&&t.length<e.length?(expandAll.setAttribute("aria-pressed","mixed"),collapseAll.setAttribute("aria-pressed","mixed")):t.length?t.length&&t.length===e.length?(expandAll.setAttribute("aria-pressed","true"),collapseAll.setAttribute("aria-pressed","false")):(expandAll.setAttribute("aria-pressed","false"),collapseAll.setAttribute("aria-pressed","false")):(collapseAll.setAttribute("aria-pressed","true"),expandAll.setAttribute("aria-pressed","false"))}}))}prefsBtns.forEach((e=>{e.addEventListener("click",(()=>{e.setAttribute("aria-pressed","true");const t=e.getAttribute("data-pref").split(" ");"unset"!==t[1]?(document.documentElement.setAttribute(`data-pref--${t[0]}`,t[1]),window.localStorage.setItem(`data-pref--${t[0]}`,t[1])):(document.documentElement.removeAttribute(`data-pref--${t[0]}`),window.localStorage.removeItem(`data-pref--${t[0]}`)),togglePrefsBtns(e),"theme"===t[0]&&matchLogoToTheme()}))}));const togglePrefsBtns=e=>{e.closest(".settings__btns-wrapper").querySelectorAll("button").forEach((t=>{t!==e&&t.setAttribute("aria-pressed","false")}))},matchLogoToTheme=()=>{let e;e=document.documentElement.getAttribute("data-pref--theme")?document.documentElement.getAttribute("data-pref--theme"):window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",document.querySelectorAll("[data-main-logo]").forEach((t=>{t.getAttribute("srcset").includes(e)?t.setAttribute("media","all"):t.setAttribute("media","none")}))};matchLogoToTheme(),window.onload=()=>{const e={...localStorage};for(const t in e)t.startsWith("data-pref-")&&"data-pref--theme"!==t&&document.documentElement.setAttribute(`${t}`,e[t]);for(const e of document.documentElement.attributes)if(e.name.includes("data-pref--")){let t=e.name.split("--");settingsModal.querySelector(`.settings__btn--${t[1]}-${e.value}`).setAttribute("aria-pressed","true")}settingsModal.querySelectorAll(".settings__btns-wrapper").forEach((e=>{e.querySelector('button[aria-pressed="true"]')||e.querySelector('[data-pref~="unset"').setAttribute("aria-pressed","true")}))},collabBtn.addEventListener("click",(()=>{toggleBool(collabBtn,"aria-expanded")})),navBtn.addEventListener("click",(()=>{toggleBool(navBtn,"aria-expanded"),navBtn.removeAttribute("data-untouched")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&("true"!==collabBtn.getAttribute("aria-expanded")||settingsModal.hasAttribute("open")||toggleBool(collabBtn,"aria-expanded"))})),prefsModalBtn.addEventListener("click",(()=>{settingsModal.removeAttribute("hidden"),settingsModal.showModal()})),modalCloseBtn.addEventListener("click",(()=>{closeModal()})),document.addEventListener("click",(e=>{e.target===settingsModal&&closeModal()}));const closeModal=()=>{settingsModal.classList.add("closing"),setTimeout((()=>{settingsModal.classList.remove("closing"),settingsModal.setAttribute("hidden",""),settingsModal.close()}),800)},codeBlocks=document.querySelectorAll("pre"),tables=document.querySelectorAll("table");if(navigator.clipboard){const e=document.createElement("span");e.classList.add("announcement","visually-hidden"),e.setAttribute("aria-live","polite"),document.querySelector("footer").appendChild(e)}async function copySnippet(e){let t=e.closest(".code__header").querySelector(".copy__announcement");t.innerText="";let a=e.closest(".code__wrapper").querySelector("code").innerText;await navigator.clipboard.writeText(a),t.innerText="Copied to clipboard",setTimeout((()=>{t.innerText=""}),5e3)}codeBlocks.forEach(((e,t)=>{let a=e.getAttribute("class").split("-");if(a){let l=`${"javascript"==a[1]?a[1]="JavaScript":a[1].toUpperCase()}`;e.insertAdjacentHTML("beforebegin",`<div class="code__wrapper"><section class="code__region" aria-labelledby="cb${t+1}"><div class="code__header">\n    <span id="cb${t+1}" class="visually-hidden">Code block ${t+1}, ${l}</span></div></section></div>`);let o=e.previousElementSibling.querySelector(".code__header");e.previousElementSibling.querySelector(".code__region").appendChild(e),navigator.clipboard?(e.classList.add("code--with-copy"),o.insertAdjacentHTML("afterbegin",`<output class="copy__announcement flex--middle"></output><button class="code__copy-btn btn btn--default">Copy ${l}</button>`)):o.insertAdjacentHTML("afterbegin",`<span class="code__label">${l}</span>`)}})),document.querySelectorAll(".code__copy-btn").forEach((e=>{e.addEventListener("click",(e=>{copySnippet(e.target)}))}));const addTabStopToCodeBlock=()=>{document.querySelectorAll(".code__region").forEach((e=>{e.scrollWidth>e.getBoundingClientRect().width?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}))},toggleTabStopOnTable=()=>{tables.forEach(((e,t)=>{e.scrollWidth>window.innerWidth-20?(e.setAttribute("tabindex","0"),e.querySelector("caption")?(e.querySelector("caption").id=`caption-${t+1}`,e.setAttribute("aria-labelledby",e.querySelector("caption").id)):e.setAttribute("aria-label","Scrollable")):(e.removeAttribute("tabindex"),e.querySelector("caption")?e.removeAttribute("aria-labelledby"):e.removeAttribute("aria-label"))}))};window.addEventListener("resize",toggleTabStopOnTable),window.addEventListener("resize",addTabStopToCodeBlock),window.onresize=toggleTabStopOnTable,window.onresize=addTabStopToCodeBlock,toggleTabStopOnTable(),addTabStopToCodeBlock();</script></body></html>