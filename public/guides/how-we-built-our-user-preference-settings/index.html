<!doctype html><html lang="en" class="no-js"><head><title>How we built our user preference settings | Make Things Accessible</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#702A8C"><meta name="description" content="The user preference settings we developed aim to give granular control to our site&#39;s presentation for disabled and abled users alike. The aim was to provide users with controls that can adjust the presentation, usability and accessibility of the site, so it is presented in a way that works for them. "><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="color-scheme" content="light dark"><script>document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('has-js');
    
    if (localStorage.getItem('theme')) {
      localStorage.setItem('data-pref--theme', localStorage.getItem('theme'));
      localStorage.removeItem('theme');
    }

    if (localStorage.getItem('data-pref--theme')) {
      document.documentElement.setAttribute('data-pref--theme', localStorage.getItem('data-pref--theme'))
    }</script><link rel="preload" href="/fonts/rem-500.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/rem-700.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/rem-900.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/red-hat-display-400.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/red-hat-display-500.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico"><link rel="canonical" href="https://www.makethingsaccessible.com/guides/how-we-built-our-user-preference-settings/"><meta property="og:title" content="How we built our user preference settings | Make Things Accessible"><meta property="og:description" content="The user preference settings we developed aim to give granular control to our site&#39;s presentation for disabled and abled users alike. The aim was to provide users with controls that can adjust the presentation, usability and accessibility of the site, so it is presented in a way that works for them. "><meta property="og:url" content="https://www.makethingsaccessible.com/guides/how-we-built-our-user-preference-settings/"><meta property="og:locale" content="en_GB"><meta property="og:site_name" content="Make Things Accessible"><meta property="og:type" content="website"><meta property="og:image" content="https://www.makethingsaccessible.com/img/social-logo.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="Make Things Accessible"><meta name="twitter:description" content="How we built our user preference settings | Make Things Accessible"><meta name="twitter:image" content="https://www.makethingsaccessible.com/img/social-logo.jpg"><meta name="twitter:image:alt" content="Make Things Accessible logo"><meta name="generator" content="Eleventy"><script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Article",
        "name": "How we built our user preference settings",
        "author": {
          "@type": "Person",
          "name": "[object Object]"
        },
        "datePublished": "2024-05-24T00:00:00.000Z"
      }</script></head><body><header class="header"><a class="skip-link" href="#h1">Skip navigation</a><nav class="nav btm__gutter--largest"><button class="nav__prefs-btn flex--middle" id="prefsBtn"><svg width="32" height="32" viewBox="0 0 32 32" focusable="false" aria-hidden="true"><path d="M 30.460938 19.730469 L 27.800781 18.195312 C 28.070312 16.742188 28.070312 15.257812 27.800781 13.804688 L 30.460938 12.269531 C 30.769531 12.09375 30.90625 11.730469 30.804688 11.394531 C 30.113281 9.167969 28.929688 7.15625 27.386719 5.480469 C 27.148438 5.226562 26.761719 5.164062 26.460938 5.335938 L 23.800781 6.875 C 22.679688 5.914062 21.394531 5.167969 20 4.679688 L 20 1.613281 C 20 1.261719 19.757812 0.957031 19.414062 0.882812 C 17.117188 0.367188 14.769531 0.394531 12.585938 0.882812 C 12.242188 0.957031 12 1.261719 12 1.613281 L 12 4.6875 C 10.613281 5.179688 9.324219 5.925781 8.199219 6.882812 L 5.542969 5.34375 C 5.238281 5.167969 4.855469 5.226562 4.617188 5.488281 C 3.074219 7.15625 1.894531 9.167969 1.199219 11.398438 C 1.09375 11.738281 1.238281 12.101562 1.542969 12.273438 L 4.207031 13.8125 C 3.9375 15.261719 3.9375 16.75 4.207031 18.199219 L 1.542969 19.738281 C 1.238281 19.914062 1.101562 20.273438 1.199219 20.613281 C 1.894531 22.835938 3.074219 24.851562 4.617188 26.523438 C 4.855469 26.78125 5.242188 26.84375 5.542969 26.667969 L 8.207031 25.132812 C 9.324219 26.09375 10.613281 26.835938 12.007812 27.324219 L 12.007812 30.398438 C 12.007812 30.75 12.25 31.054688 12.59375 31.132812 C 14.886719 31.644531 17.238281 31.617188 19.417969 31.132812 C 19.761719 31.054688 20.007812 30.75 20.007812 30.398438 L 20.007812 27.324219 C 21.394531 26.832031 22.679688 26.085938 23.804688 25.132812 L 26.46875 26.667969 C 26.773438 26.84375 27.15625 26.789062 27.394531 26.523438 C 28.9375 24.855469 30.117188 22.84375 30.8125 20.613281 C 30.90625 20.269531 30.769531 19.90625 30.460938 19.730469 Z M 16 21 C 13.242188 21 11 18.757812 11 16 C 11 13.242188 13.242188 11 16 11 C 18.757812 11 21 13.242188 21 16 C 21 18.757812 18.757812 21 16 21 Z M 16 21 "/></svg> <span class="visually-hidden">Settings</span></button> <button class="nav__menu-btn flex--middle" id="navBtn" aria-controls="navPanel" aria-expanded="false" data-untouched><span class="nav__menu-bar"></span> <span class="visually-hidden">Menu</span></button><div class="nav__wrapper" id="navPanel"><ul class="nav__list"><li class="nav__item"><a class="nav__link" href="/">Home</a></li><li class="nav__item"><a class="nav__link" href="/about/">About</a></li><li class="nav__item"><a class="nav__link" href="/guides/">Guides</a></li><li class="nav__item"><a class="nav__link" href="/faqs/">FAQs</a></li><li class="nav__sub-items--parent"><noscript><a class="nav__link" href="#footerLinks">All links</a></noscript><button class="nav__btn--collab" aria-expanded="false" aria-controls="collabNavPanel" id="collabBtn" hidden>Collaborations</button><div class="nav__list-sub-panel" id="collabNavPanel" hidden><ul class="nav__list--level-2"><li><h2 class="nav__list-collaborator" data-no-accent>RNIB</h2><ul class="nav__list--level-3"><li><a class="nav__link-sub" href="/rnib/accessibility-passport">Accessibility passport</a></li></ul></li><li><h2 class="nav__list-collaborator" data-no-accent>Access and Assistance for All</h2><ul class="nav__list--level-3"><li><a class="nav__link-sub" href="/aaa/">AAA Home</a></li><li><a class="nav__link-sub" href="/aaa/roles/">AAA Roles</a></li><li><a class="nav__link-sub" href="/aaa/student-stories/">AAA Student Stories</a></li><li><a class="nav__link-sub" href="/aaa/supporters/">AAA Supporters</a></li></ul></li></ul></div></li></ul></div></nav><picture class="header__logo flex--middle btm__gutter--largest"><source media="(prefers-color-scheme: light)" srcset="/img/mta-light-sm.webp 360w, /img/mta-light.webp 600w" data-main-logo><source media="(prefers-color-scheme: light)" srcset="/img/mta-light.png" data-main-logo><source media="(prefers-color-scheme: dark)" srcset="/img/mta-dark-sm.webp 360w, /img/mta-dark.webp 600w" data-main-logo><source media="(prefers-color-scheme: dark)" srcset="/img/mta-dark.png" data-main-logo><img src="/img/mta-light.png" height="136" width="600" alt="Make Things Accessible, logo"></picture><search class="header__search-block btm__gutter--largest"><label id="sFilterLbl" for="sFilter" class="search__label">Search for Guides or Tags, by keyword</label><div class="search__wrapper" data-expanded="false"><input class="search__input" id="sFilter" type="text" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-controls="searchDialog" autocomplete="off" aria-haspopup="dialog"> <svg aria-hidden="true" focusable="false" stroke="#000" stroke-width="9.8" viewBox="-19.6 -19.6 529.6 529.6" height="24" width="24"><path d="M484.1 454.8 373.6 344.2a210.6 210.6 0 1 0-29.2 29.2l110.5 110.5c12.9 11.8 25 4.2 29.2 0a20 20 0 0 0 0-29.1zm-443-244a169.5 169.5 0 1 1 339 0 169.5 169.5 0 0 1-339 0z"/></svg></div><div class="search__panel" id="searchDialog" role="dialog" aria-labelledby="sFilterLbl"><div class="search__info flex--middle"><span class="search__info--icon"></span><span class="search__info--text" aria-hidden="true"></span></div><ul class="search__list"></ul><div id="sMsg" aria-live="polite" class="visually-hidden"></div></div></search></header><main class="main"><h1 id="h1" class="main__title btm__gutter--largest" tabindex="-1">How we built our user preference settings</h1><div style="display: none;"><svg id="cTip" aria-hidden="true" focusable="false" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path fill="var(--v2--color-black)" d="M1 11h3v2H1v-2m9 11c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-1h-4v1m3-21h-2v3h2V1M4.9 3.5 3.5 4.9 5.6 7 7 5.6 4.9 3.5M20 11v2h3v-2h-3m-.9-7.5L17 5.6 18.4 7l2.1-2.1-1.4-1.4M18 12a6 6 0 0 1-3 5.2V19c0 .6-.4 1-1 1h-4c-.6 0-1-.4-1-1v-1.8A6 6 0 0 1 12 6a6 6 0 0 1 6 6M8 12l.1 1H16l.1-1a4 4 0 1 0-8 0Z"/></svg> <svg id="cInfo" aria-hidden="true" focusable="false" width="24" height="24"><path fill="var(--v2--color-black)" d="M13.5 4A1.5 1.5 0 0 0 12 5.5 1.5 1.5 0 0 0 13.5 7 1.5 1.5 0 0 0 15 5.5 1.5 1.5 0 0 0 13.5 4m-.4 4.8c-1.2 0-4.4 2.7-4.4 2.7-.2.1-.1.1 0 .4.2.3.2.3.4.1.2 0 .5-.3 1-.6 2.2-1.4.4 1.7-.5 7-.4 2.7 2 1.3 2.6.9l2.3-1.6c.3-.2.1-.3 0-.5-.2-.2-.3 0-.3 0-.7.4-1.8 1.3-2 .7-.2-.6 1-4.5 1.7-7.2.1-.6.4-2-.8-2Z"/></svg> <svg id="cWarn" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 36 36"><path d="M18 0C8.059 0 0 8.059 0 18s8.059 18 18 18 18-8.059 18-18S27.941 0 18 0Zm0 29.488c-1.406 0-2.371-1.082-2.371-2.488 0-1.445 1.004-2.488 2.371-2.488 1.445 0 2.371 1.043 2.371 2.488 0 1.406-.926 2.488-2.371 2.488Zm.934-9.508c-.36 1.223-1.489 1.247-1.864 0-.433-1.433-1.976-6.875-1.976-10.41 0-4.668 5.836-4.687 5.836 0 0 3.555-1.625 9.14-1.996 10.41Zm0 0"/></svg></div><div class="guide__info-panel"><div class="guide__author"><strong>By: </strong><a href="/authors/dlee">Darren Lee</a></div><div class="guide__date"><strong>Posted: </strong><time datetime="2024-05-24T00:00:00.000Z">May 24, 2024</time></div><strong class="guide__label">Tagged with:</strong><ul class="tags tags__all"><li class="tag__item"><a href="/tags/case-study/" class="tag__link">Case study</a></li><li class="tag__item"><a href="/tags/javascript/" class="tag__link">JavaScript</a></li><li class="tag__item"><a href="/tags/css/" class="tag__link">CSS</a></li><li class="tag__item"><a href="/tags/adapting-websites/" class="tag__link">Adapting websites</a></li></ul></div><article class="cms"><div class="cms__anchor-wrapper"><h2 id="intro" tabindex="-1">Intro</h2><a class="cms__anchor flex--middle" href="#intro" aria-labelledby="intro"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>For those of you that have visited our site before, you may have noticed it has recently undergone a complete redesign, we added some new features, restyled the presentation, made further enhancements to both the accessibility and usability of the site and also increased page performance a little.</p><p>Why did we do this? Well, MTA has grown a little since we first developed it a couple of years ago, we have collaborations with some awesome organisations, we now have quite a lot of content that was perhaps getting difficult to find, and last but certainly not least we are always keen to improve the accessibility of this site and as accessibility can never be &quot;done&quot;, it was a good opportunity to discover where improvements could be made.</p><p>One particular feature that we're going to focus on is our user preferences settings, these can be accessed by activating the Settings button in the site header (visually identified as a cog icon, within a button). Upon activating said button a modal overlay appears (No, not that type of overlay), with several groups of controls that change multiple aspects of the site's presentation. I do have to concede that they are at this stage, primarily controls for visual changes. Perhaps there is some scope for changes that may help users with motility or cognitive issues, which I would be super keen to implement if anybody could think of anything that would make a meaningful impact for our users? If you think of anything, please do feel free to contact us, using the email in the site's footer.</p><div class="cms__anchor-wrapper"><h2 id="disambiguation-time" tabindex="-1">Disambiguation time</h2><a class="cms__anchor flex--middle" href="#disambiguation-time" aria-labelledby="disambiguation-time"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>It's likely a given that if you are here reading this, you are in some way involved or connected to digital accessibility? So, making that assumption encourages me to make one more, we all know what overlays are, right? I'm just gonna generalise a bit, as I don't fancy getting involved in any litigation.</p><p>So an overlay is generally something magic, when I say magic, I of course mean deceptive and a bit of trickery that doesn't really trick folks that understand how the smoke, mirrors and distractions work in illusions.</p><p>These overlays do offer quite a bit of customisation for users, you can change various aspects of presentation, have content read aloud, modify colours and text, all sorts really. Some users may find some of these controls useful, others may actually be adversely affected by them, one thing that is for sure is they don't actually make an inaccessible site &quot;accessible&quot;. I guess it is similar to sticking a Lamborghini badge on a clapped-out Lada, it wouldn't make it a supercar, it'd still be a banger, albeit a banger with a prestigious badge.</p><p>You may have noticed that there are some similarities to our preferences, in that something &quot;overlays&quot; the screen and you can modify several aspects of the presentation of our site. This is where I want to disambiguate those differences:</p><p>I built this site with an accessibility-first approach, it was absolutely the most important consideration all the way through the initial build and the new redesign. I tested, I researched and tested again. I constantly had to review design elements, as I could not get them to quite meet the accessibility criteria I aimed for. As an example, all text on this site actually meets SC 1.4.6 Contrast Enhanced (AAA), that actually limited me quite a bit design-wise. It became a challenge at times, but challenging in a fun way, trying to make the site look pretty good whilst maintaining a high contrast ratio was a fun task for somebody who isn't a designer. I am not saying the accessibility of the site is perfect, but I did squeeze in as many AAA criteria as I reasonably could.</p><p>Some of the AAA criteria actually recommend providing ways for users to adapt certain aspects of the presentation. We already did this for the site themes, so it was just an extension of that really. I definitely didn't take any inspiration from overlays, it was AAA and AA criteria, some things that we as a team thought may be useful and some inspiration was taken from some other sites across the web.</p><p>These settings are by no means our &quot;sticking plaster&quot;, the site was built using an accessibility-first approach, the settings are nothing more than preferences, a user can choose to use them, or choose not to, they do not affect anything else. We cannot track usage of these preferences and we have no desire to do that, they're just an option that some folks may find useful and others may not care for. So just to clarify, this is not an overlay, it's completely custom and was built to complement a site that aims to be as accessible as possible.</p><div class="cms__anchor-wrapper"><h2 id="cant-we-just-use-the-browser-settings-for-most-of-this" tabindex="-1">Can't we just use the browser settings for most of this?</h2><a class="cms__anchor flex--middle" href="#cant-we-just-use-the-browser-settings-for-most-of-this" aria-labelledby="cant-we-just-use-the-browser-settings-for-most-of-this"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>Sure, some of the features are actually available in browsers, but is everybody &quot;tech savvy&quot; enough to know where to find those options? What about users using a mobile or tablet on a browser that does not allow extensions (Chrome?) how do they increase the text-spacing on a mobile? It's easy enough to do on a desktop/laptop browser, assuming the user knows what an extension is, how to find it, install it and use it, but Google don't let us install extensions on mobile, so perhaps there is some use for our users there?</p><p>I'm knocking on a little bit now, my vision is not as good as it once was. When I wake up in the morning, I tend to doom scroll on my phone whilst consuming copious amounts of coffee. I hate to admit that text on my phone is often a bit blurry and somewhat difficult to read, especially in the mornings. I know how to increase the font size in my browser, but that's a global setting, it applies to every site I visit and at this stage, some sites have decent enough sized text that it isn't a problem for me to read, so I don't want a global setting as I don't want to affect the layout of every site.</p><p>Go to an optician, I hear you say? I did before and I just could not get on with the glasses, so I returned them. I did get a bigger phone though, which helps (I'm not stubborn, honest), but now I'm pretty much at the limit of how big a phone can be and I doubt an iPad would fit in my pockets, so I'll have to get some more glasses in the near future.</p><p>Obviously I didn't implement the ability to adjust the text size for me, I did it for our users, there is a similar feature on Twitter (nope, I'm still not calling it by it's new name), whereby I can increase the font size. I actually do use that and it helps the text become more readable to me. Obviously I am not the only person that benefits from that option, a whole host of folks likely do, whether that be due to a visual disability, a reading disability, getting a bit old or just because they prefer it that way.</p><p>What about motion? The media query we apply in CSS is called <code>prefers-reduced-motion</code>, it's not called <code>prefers-no-motion</code>, but what if a user does actually prefer no motion? Some folks undoubtedly will want the ability to turn off all motion and transitions, so we provide that as an option. Can this be done in the browser? Well we definitely could with a portable stylesheet or a bookmarklet, but I'm unaware of a setting that turns off all motion, so if this option benefits just one user, it was worth it to us.</p><div class="cms__anchor-wrapper"><h2 id="okay-how-did-you-build-it" tabindex="-1">Okay, how did you build it?</h2><a class="cms__anchor flex--middle" href="#okay-how-did-you-build-it" aria-labelledby="okay-how-did-you-build-it"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>Okay, so my mind set here was to develop these preferences using JavaScript and LocalStorage, pretty standard fare really. Essentially just using a similar pattern to what we did for the site theme switcher, but just that little more extensible. As is common with websites oftentimes, we want to add new features at a later date, perhaps a user may request something that helps them a little, perhaps there is something obvious I have missed, perhaps WCAG will introduce new ideas when version 3.0 starts to take its final form.</p><p>So, the idea was to create reusable functionality, that will likely ever only require CSS modifications and not require any faffing around refactoring the JavaScript to add a new preference, I guess a fire-and-forget approach was what I wanted to achieve.</p><h3>My approach</h3><p>At the basic level, all we really do is add a data-attribute or class to the <code>&lt;html&gt;</code> or <code>&lt;body&gt;</code> element in most cases, so we have a handy hook for our CSS, so this really isn't anything revolutionary.</p><p>First we'll create the buttons that toggle our preference, we're just going to create one preference to start with, as then I can demonstrate how easy it is to add another, a little later on. the first example will be for changing our site's font size:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>User preferences<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__fieldset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__legend<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Font size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Large<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size unset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Unset<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size largest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Largest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span><br><br><span class="token comment">&lt;!-- Add some lorem ipsum, below --></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span> Lorem ipsum dolor sit amet consectetur, adipisicing elit. Blanditiis, beatae! Aperiam veritatis accusantium repudiandae perspiciatis sint quibusdam, illum ut impedit deleniti, atque laboriosam aut voluptatem optio possimus officiis voluptates rerum.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><ul><li><p>We wrap our controls in a <code>fieldset</code>, so we have a programmatic grouping association</p></li><li><p>We add a <code>legend</code>, as users tend to want to know what something is going to do before they interact with it</p></li><li><p>We add our three buttons:</p><ul><li>One for large text</li><li>One for resetting or unsetting font size back to the site's default</li><li>One for largest text</li></ul></li><li><p>We add some very specific data-attributes</p><ul><li>We add a data-attribute to each called <code>data-pref</code> and the value of each is an identifier and a value, which are space separated. So for us <code>f-size</code> simply means font size and the value is either <code>large</code>, <code>largest</code> or <code>unset</code></li></ul></li><li><p>We add <code>aria-pressed</code> to each button, as we require a state to programmatically inform users that the element is a toggle-able button and it's current state. In the HTML, we're just setting them all as <code>false</code> as we will eventually listen for a page <code>load</code> event and set <code>true</code> to the correct one. In this implementation, there will always be one which has the value set to <code>true</code></p></li><li><p>We also have a <code>&lt;h1&gt;</code> in there, as at some point you will likely think &quot;But I don't want all the text to be exactly the same size, that would be silly&quot; and you would of course be right. I'll show you a quick way of solving that later.</p></li></ul><p>Obviously you can use class names and any data attribute names you wish, they just need to be consistent as will become apparent later.</p><p>Now let's just get a JS reference to the button elements we will be using in our functions:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> prefsBtns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[data-pref]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>We store a reference to to all of the <code>&lt;button&gt;</code>s , we can just use the <code>data-pref</code> attribute to get that collection.</p><p>Now we will add the functionality:</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Loop through all prefBtns</span><br><br>prefsBtns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">btn</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <br><span class="token comment">// Listen for click events</span><br>  <br>   btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>     <br><span class="token comment">// When clicked toggle aria-pressed to true</span><br>     <br>   btn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-pressed'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>     <br><span class="token comment">// Get the identifier and value from the data attribute and split at the space character</span><br>   <br>     <span class="token keyword">const</span> pref <span class="token operator">=</span> btn<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-pref'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>     <br><span class="token comment">// If the value [1] of the clicked btn is not 'unset', add a data attribute to the html element</span><br><span class="token comment">// prefix 'data-pref--' and add the identifier [0], then the value becomes value [1] of the</span><br><span class="token comment">// button's data-attribute value [1]</span><br>     <br>   <span class="token keyword">if</span> <span class="token punctuation">(</span>pref<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'unset'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>     document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data-pref--</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pref<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> pref<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>     <span class="token comment">// Let's just add that same data attribute &amp; value to localStorage</span><br>     <br>     window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data-pref--</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pref<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> pref<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>     <span class="token comment">// If the value [1] is unset, remove the attribute from the html element and remove the entry</span><br><span class="token comment">// From local storage</span><br>     <br>   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data-pref--</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pref<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">data-pref--</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pref<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>   <span class="token punctuation">}</span><br><span class="token comment">// We send the clicked button to an as yet unwritten function, comment this out if</span><br><span class="token comment">// you're coding along</span><br>     <br>     <span class="token function">togglePrefsBtns</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br>  </code></pre><p>Hopefully that makes sense? If you are following along in a code editor, you will notice that we are now adding our data attribute to the <code>&lt;html&gt;</code>element and if you look in <code>localStorage</code>, we are also adding it there. If we select &quot;Unset&quot; we remove the attribute from the <code>&lt;html&gt;</code> element and <code>localStorage</code>.</p><p>Next we will make sure that when one button is clicked, it's sibling buttons are set to <code>aria-pressed=&quot;false&quot;</code>, so we're just gonna build a small function, we called it in the previous step and we hadn't declared it, so let's do that now.</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Declare our function that accepts the clicked button, from the previous step</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">togglePrefsBtns</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">btn</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <br><span class="token comment">// Get the closest fieldset (its parent) and search for all buttons inside</span><br>  <br>  btn<span class="token punctuation">.</span><span class="token function">closest</span><span class="token punctuation">(</span><span class="token string">'.settings__fieldset'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">prefBtn</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br><br>    <span class="token comment">// get all buttons in the fieldset that aren't the clicked button</span><br>    <br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>prefBtn <span class="token operator">!==</span> btn<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <br><span class="token comment">// Set aria-pressed to false</span><br>      <br>      prefBtn<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-pressed'</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>So, now we can only have one button per group set to <code>aria-pressed=&quot;true&quot;</code>, which was the goal, we're almost done now, we just need to handle the page loads and initial states.</p><p>So it makes sense that preferences will persist across pages and of course on repeat visits. If a user finds it more comfortable having larger text, then I'm sure we can all agree it would be a huge annoyance to have to set that on every page they visited and on every repeat visit. As it stands, when we click a button, we add a data attribute and store that same data attribute in <code>localStorage</code>, if we refresh the page, we no longer have the data attribute, but we do have the <code>localStorage</code> entry, so we just need to utilise that on a page load event, so let's tackle that last step now.</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// wait for the page load to complete</span><br><br>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <br><span class="token comment">// Get all items from local storage</span><br>  <br>  <span class="token keyword">const</span> userStoredPrefs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>localStorage<span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <br><span class="token comment">// Loop through all of the properties</span><br>  <br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> prop <span class="token keyword">in</span> userStoredPrefs<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <br><span class="token comment">// discard any property that does not start with our prefix 'data-pref--'</span><br>    <br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>prop<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'data-pref--'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <br><span class="token comment">// Set the data attribute to be the property and the value on the HTML element</span><br>     <br>      document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> userStoredPrefs<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br><span class="token comment">// Loop through all of the attributes that are present on the HTML element</span><br>  <br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> userPref <span class="token keyword">of</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token comment">// Discard those that do not start with our prefix</span><br>    <br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>userPref<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'data-pref--'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <br><span class="token comment">// Split our attribute at the double htphen so we can get our identifier</span><br>      <br>      <span class="token keyword">let</span> prefType <span class="token operator">=</span> userPref<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'--'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <br><span class="token comment">// Find the button that has an attribute that matches, for our font size we are searching for</span><br><span class="token comment">// data-pref="f-size [actual value]" and then adding the value after a space, for largest text </span><br><span class="token comment">// our query selector will actually be: data-pref="f-size largest", as we have manipulated</span><br><span class="token comment">// the string. so we set that matching button to aria-pressed="true"</span><br>      <br>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[data-pref="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prefType<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userPref<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-pressed'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><br><span class="token comment">// Finally, what if a user has not selected a button, well then we need to set aria-pressed="true", to</span><br><span class="token comment">// our default (Unset).</span><br><span class="token comment">// Loop through all of our groups (the fieldsets)</span><br>  <br>  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.settings__fieldset'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">group</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br><br>    <span class="token comment">// Search within each group, if any group does NOT have a button that has aria-pressed="true"</span><br><span class="token comment">// then find any button in that group that is a pref button, that has a value of "unset"</span><br><span class="token comment">// we do this with the CSS wildcard selector * and a value of "Unset" and simply set aria-pressed="true"</span><br>    <br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>group<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button[aria-pressed="true"]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      group<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'[data-pref*="unset"'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-pressed'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>Well, that's our JS done. I'll put my obligatory disclaimer in here that I do not consider myself a JS ninja, so undoubtedly a &quot;Tech bro&quot; with a Tesla and loads of Bitcoin could improve that in some way. We can be safe in the knowledge that they would have probably just used React and ignored accessibility altogether, so at least ours works properly [insert cry/laugh emoji].</p><p>It's difficult to explain exactly what I did above in a concise way, considering I'm trying to find the common ground between explaining to two audiences, one of which may be JS ninjas and the other may know a little or nothing about JS, but are here to learn. I guess the easiest way to summarise is:</p><ul><li>Wait for page load to complete</li><li>Grab any preference settings from local storage and set matching data attributes on the <code>&lt;html&gt;</code> element only if they start with our prefix <code>data-pref--</code></li><li>Then loop through all of the <code>&lt;html&gt;</code> attributes, just getting the ones that start with our prefix and manipulating the attribute and its value so we end up with an exact match for its corresponding button</li><li>When we get that match, change the value of <code>aria-pressed</code> to <code>true</code></li><li>Then after that has happened, search within all groups (fieldsets) that don't have a &quot;pressed&quot; button and just set the default (Unset) to be the pressed button (this is just belt and braces, as the HTML already handles that, on page load).</li></ul><p>So, just one thing missing at this stage, we need a way to visually identify which <code>&lt;button&gt;</code> is pressed, as all is good for screen reader users, but those that aren't having the accessibility information announced to them don't know which is <code>&lt;button&gt;</code> pressed, let's fix that now, I'm just going to use CSS psuedo elements:</p><pre class="language-css"><code class="language-css"><span class="token comment">/* Set a few custom properties on the ROOT element, we will use these soon */</span><br><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--default-f-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span><br>  <span class="token property">--colour-interactive</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span><br>  <span class="token property">--colour-bg</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Some very basic font styling, using our default font size custom property, we set this<br>   on the HTML element, so we can use REM units correctly */</span><br><br><span class="token selector">html</span> <span class="token punctuation">{</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--default-f-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* We use the calc() function, with our custom property, for elements that have a different font size */</span><br><br><span class="token selector">h1</span> <span class="token punctuation">{</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--default-f-size<span class="token punctuation">)</span> * 1.5<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Give the fieldset and its contents a little breathing space */</span><br><br><span class="token selector">fieldset</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">gap</span><span class="token punctuation">:</span> .75rem<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Add some styles to make it look OK and set a relative position */</span><br><br><span class="token selector">button</span> <span class="token punctuation">{</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span><br>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> .25rem 2rem .25rem 1.25rem<span class="token punctuation">;</span><br>  <span class="token property">font</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">transition</span><span class="token punctuation">:</span> background-color 250ms ease-in<span class="token punctuation">,</span> color 250ms ease-in<span class="token punctuation">,</span> outline-color 250ms ease-in<span class="token punctuation">;</span><br>  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Create the shared declarations for the two cross parts */</span><br><br><span class="token selector">[aria-pressed="false"]::before,<br>[aria-pressed="false"]::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> .25rem<span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Rotate the two elements in opposite directions to create a cross */</span><br><br><span class="token selector">[aria-pressed="false"]::before</span> <span class="token punctuation">{</span><br>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[aria-pressed="false"]::after</span> <span class="token punctuation">{</span><br>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Create a checkmark, using the border hack (bottom and right */</span><br><br><span class="token selector">[aria-pressed="true"]::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> .625rem<span class="token punctuation">;</span><br>  <span class="token property">bottom</span><span class="token punctuation">:</span> .625rem<span class="token punctuation">;</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">height</span><span class="token punctuation">:</span> .8rem<span class="token punctuation">;</span><br>  <span class="token property">width</span><span class="token punctuation">:</span> .4rem<span class="token punctuation">;</span><br>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> .25rem solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-right</span><span class="token punctuation">:</span> .25rem solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Add a suitable focus outline */</span><br><br><span class="token selector">button:focus</span> <span class="token punctuation">{</span><br>  <span class="token property">outline</span><span class="token punctuation">:</span> 3px solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">outline-offset</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Inverse the font colour and background colour on hover and focus */</span><br><br><span class="token selector">button:focus,<br>button:hover</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-bg<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Inverse the colour of the cross icon and add a small transition */</span><br><br><span class="token selector">[aria-pressed="false"]:focus::before,<br>[aria-pressed="false"]:focus::after,<br>[aria-pressed="false"]:hover::before,<br>[aria-pressed="false"]:hover::after</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">transition</span><span class="token punctuation">:</span> background-color 250ms ease-in<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Inverse the colours of the checkmark and also add a small transition */</span><br><br><span class="token selector">[aria-pressed="true"]:focus::before,<br>[aria-pressed="true"]:hover::before</span> <span class="token punctuation">{</span><br>  <span class="token property">border-bottom</span><span class="token punctuation">:</span> .25rem solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-right</span><span class="token punctuation">:</span> .25rem solid <span class="token function">var</span><span class="token punctuation">(</span>--colour-interactive<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">transition</span><span class="token punctuation">:</span> border-color 250ms ease-in<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>So, that's the CSS pretty much wrapped up. Our buttons look OK, we're not going all out on style, as you will obviously want to use your own styling. The only change we need to make now is to actually get this working. We want all of the text size's to change, when we click a button (unless that button is already pressed), we will need a tiny bit of additional CSS for that:</p><pre class="language-css"><code class="language-css"><span class="token comment">/* We just override the variables when our data attributes are present on the HTML element<br>   these are just arbritary values, just to demonstrate. We need one for each value<br>   that gets stored. remember our 'Unset' value never gets stored anywhere */</span><br><br><span class="token selector">[data-pref--f-size="large"]</span> <span class="token punctuation">{</span><br>  <span class="token property">--default-f-size</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[data-pref--f-size="largest"]</span> <span class="token punctuation">{</span><br>  <span class="token property">--default-f-size</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>It's as easy as that. There are of course issues we have not addressed here, I haven't made it responsive, I haven't factored in High Contrast Mode and we haven't really considered specificity, although as we are simply inheriting the font size from the root element, we should be good. I'm not usually a fan of the CSS <code>!important</code> property, but using it for user overrides seems like a great use of it to me. this is more of a guide on how to create the reusable functionality, as opposed to how to make it look nice on mobile etc.</p><p>If you have been following along, you will now notice that when we select a <code>&lt;button&gt;</code> other than 'Unset', all of the text, including the <code>&lt;h1&gt;</code> changes size, which was of course the goal.</p><h3>Reusing our functionality</h3><p>Earlier I did promise to demonstrate how to reuse this, with relative ease, so let's just make another new user preference. First we will need to add some HTML, the way I do this is, I simply copy and then paste from our existing <code>&lt;fieldset&gt;</code> group and then modify it:</p><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- Initial preferences group --></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__fieldset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__legend<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Font size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Large<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size unset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Unset<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size largest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Largest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span><br><br><span class="token comment">&lt;!-- New preferences group --></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__fieldset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__legend<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Line height<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>l-height large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Large<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>l-height unset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Unset<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>l-height largest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Largest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span></code></pre><p>In the above, I have just changed the identifier part of our data attributes' values on the new group we copy and pasted, as well as the <code>&lt;legend&gt;</code> text. Pretty straightforward, right?</p><p>Now we just need a little touch of CSS, I'm just going to add to existing style declarations and add two new ones, the comments should make that clear. I just don't want to paste in all of the code and overcomplicate things for you.</p><pre class="language-css"><code class="language-css"> <span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--default-f-size</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span><br>  <span class="token property">--colour-interactive</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span><br>  <span class="token property">--colour-bg</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><br>   <br>  <span class="token comment">/* Just add the line below */</span><br>   <br>   <span class="token property">--line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* Add the following two declarations to the stylesheet */</span><br><br><span class="token selector">[data-pref--l-height="large"]</span> <span class="token punctuation">{</span><br>  --line-height 1.75<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[data-pref--l-height="largest"]</span> <span class="token punctuation">{</span><br>  --line-height 2<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">html</span> <span class="token punctuation">{</span><br>  <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span><br>  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--default-f-size<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <br>  <span class="token comment">/* Add the line below */</span><br>  <br>  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--line-height<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>That was it, within just a few minutes we have a second user preference set up, as we did all of the ground work earlier. We'll add just one more, this time we will make a more complex one, by adding an additional button:</p><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- Old preferences --></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__fieldset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__legend<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Font size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Large<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size unset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Unset<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>f-size largest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Largest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__fieldset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__legend<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Line height<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>l-height large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Large<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>l-height unset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Unset<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>l-height largest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Largest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span><br><br><span class="token comment">&lt;!-- New preference --></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__fieldset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings__legend<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Highlight colour (interactive controls colour)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>h-color unset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Unset (purple)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>h-color black<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Black<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>h-color red<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Red<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">aria-pressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">data-pref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>h-color blue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Blue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span></code></pre><p>In the above code example:</p><ul><li>I have added a 4th button to the new group, again, nothing smart here, it was just a copy and paste again</li><li>I have changed the <code>&lt;legend&gt;</code>, as one would expect</li><li>I have changed both the identifier and the value, for each data attribute and of course, changed the contents of each button.</li></ul><p>Twitter has a similar thing to the above, that enables a user to change the colour of links and buttons, etc, so this is a rough example of that. Don't just go copy and pasting this one, as there is every chance it will cause low contrast issues on a real site, unless you are real careful with the colour options you provide. We don't have this option in our preferences, it would likely take a little bit of trial and error to get it right, but it's important that it is right, as otherwise it may be useless to some folks who would actually benefit. Anyway, let's just add our final bits of CSS (we only need a little bit here, three declarations for our three new buttons that do not 'Unset' anything. We already created a custom property, earlier for the colour of interactive controls, so the only thing we need to do, is override the colour when the relevant attribute is on the <code>&lt;html&gt;</code> element.</p><pre class="language-css"><code class="language-css"><span class="token comment">/* Just add three new declartions, one for each new colour */</span><br><br><span class="token selector">[data-pref--h-color="black"]</span> <span class="token punctuation">{</span><br>  <span class="token property">--colour-interactive</span><span class="token punctuation">:</span> #1f1f1f<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[data-pref--h-color="red"]</span> <span class="token punctuation">{</span><br>  <span class="token property">--colour-interactive</span><span class="token punctuation">:</span> #c10202<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">[data-pref--h-color="blue"]</span> <span class="token punctuation">{</span><br>  <span class="token property">--colour-interactive</span><span class="token punctuation">:</span> #0256c1<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Again, it didn't take long to create a totally new user preference, just a tiny bit of CSS and a little additional HTML, both of which we can basically copy, paste and then modify.</p><div class="cms__anchor-wrapper"><h2 id="the-complete-codepen" tabindex="-1">The complete CodePen</h2><a class="cms__anchor flex--middle" href="#the-complete-codepen" aria-labelledby="the-complete-codepen"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p class="codepen" data-height="300" data-default-tab="js,result" data-slug-hash="ZENpbyN" data-pen-title="Reusable user preference settings" data-preview="true" data-user="LDAWG-a11y" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;"></p><script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script><div class="cms__anchor-wrapper"><h2 id="wrapping-up" tabindex="-1">Wrapping up</h2><a class="cms__anchor flex--middle" href="#wrapping-up" aria-labelledby="wrapping-up"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="4 14 40 20"><path d="M22.5 34H14q-4.2 0-7-3t-3-7q0-4.2 3-7t7-3h8.5v3H14q-2.9 0-5 2-2 2.1-2 5t2 5q2.1 2 5 2h8.5Zm-6.3-8.5v-3h15.6v3Zm9.3 8.5v-3H34q2.9 0 5-2 2-2.1 2-5t-2-5q-2.1-2-5-2h-8.5v-3H34q4.2 0 7 3t3 7q0 4.2-3 7t-7 3Z"></path></svg></a></div><p>Hopefully I have explained well enough to help you understand the process? The key takeaway is just consistently naming things, so the identifier part of a button's data attribute's value is the bit that needs to be consistent, within that group. We could have taken another approach, where the whole attribute on the button had a value that was the full data attribute, maybe that approach is better? I just went for this one, as it made more sense in my mind. It's important to let you know I do not have any Bitcoin or a Tesla though :) .</p><p>We do have one issue with what we have done, it's more of a final polish issue than anything else. As we can change visual aspects, we will likely get a brief moment where the initial style displays and then the user selected style overrides it, which is a bit janky. So, there is of course a way to get around that and it requires running a small snippet of JS in the <code>&lt;head&gt;</code> section of the site. Essentially, we would be looping through all of those key/value pairs we have in <code>localStorage</code> and adding the necessary data attributes before we render the page. We do exactly that for our theme, in that we check for the theme data attribute, very early on, apply the attribute and then the page builds, without a flash of an un-rendered theme. I did try to do this for all of our preference settings whilst in development, but it actually added quite a bit of a delay to the render times. I do need to look deeper into that, at some point, though. I can't take the credit for the useful snippet in the <code>&lt;head&gt;</code> section, as I just modified something from <a href="https://web.dev/articles/building/a-theme-switch-component">Adam Argyle's guide on Web.Dev (caution, it does have some auto-playing media)</a>. Obviously that would need modifying a little, this is the snippet that does it for our theme, in the <code>&lt;head&gt;</code> section:</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'data-pref--theme'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-pref--theme'</span><span class="token punctuation">,</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'data-pref--theme'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>We're just checking for the presence of an item in local storage <code>data-pref--theme</code> and then adding the correct attribute and value to the <code>&lt;html&gt;</code> element. As I stated, I did try looping through the items for all of our preferences here, but it was a little slower and I couldn't cope with not having 4 * 100s in Lighthouse, as it would annoy me.</p><p>Well, hopefully this makes sense and demoes that after a little careful planning, it's super simple to add new user preferences whenever there is a useful need for one. I should also point out that it may not be as simple as that if you're working on a legacy code base, as this does relay on CSS custom properties. Also, as is always the case, it's much easier to create something from scratch, on a blank page, than it is to transplant it into an existing system, but it was pretty late in the day we decide to implement it in here and it wasn't overly difficult.</p></article><div class="socials__container" role="group" aria-labelledby="shareTitle"><h2 class="socials__title" id="shareTitle" data-no-accent>Share on:</h2><a href="//twitter.com/intent/tweet?text=How%20we%20built%20our%20user%20preference%20settings&url=https://www.makethingsaccessible.com/guides/how-we-built-our-user-preference-settings/" class="socials__link flex--middle"><span class="visually-hidden">Twitter</span><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 0 0 1.88-2.38c-.83.5-1.75.85-2.72 1.05a4.28 4.28 0 0 0-7.32 3.91A12.2 12.2 0 0 1 3 4.79a4.24 4.24 0 0 0 1.33 5.71c-.71 0-1.37-.2-1.95-.5v.03a4.3 4.3 0 0 0 3.44 4.21 4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06A12.14 12.14 0 0 0 8.12 21C16 21 20.33 14.46 20.33 8.79l-.01-.56A8.57 8.57 0 0 0 22.46 6Z"/></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.makethingsaccessible.com/guides/how-we-built-our-user-preference-settings/&title=How%20we%20built%20our%20user%20preference%20settings" class="socials__link flex--middle"><span class="visually-hidden">LinkedIn</span><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M1 2.84A1.84 1.84 0 0 1 2.84 1h18.32A1.84 1.84 0 0 1 23 2.84v18.32A1.84 1.84 0 0 1 21.16 23H2.84A1.84 1.84 0 0 1 1 21.16V2.84Zm8.7 6.55h2.99v1.5c.43-.87 1.53-1.64 3.18-1.64 3.17 0 3.92 1.71 3.92 4.86v5.82h-3.2v-5.1c0-1.8-.44-2.8-1.53-2.8-1.51 0-2.14 1.08-2.14 2.8v5.1H9.7V9.39Zm-5.5 10.4h3.22V9.25H4.2v10.54ZM7.88 5.81a2.06 2.06 0 1 1-4.12 0 2.06 2.06 0 0 1 4.13 0Z" clip-rule="evenodd"/></svg></a></div><aside class="author-bio panel gutter-btm--major"><a class="skip-link--static" href="#guideStart">Skip bio</a><div class="author-bio--upper"><h2 class="author-bio__title">About Darren</h2></div><div class="author-bio--lower"><div class="author-bio__intro"><p>Darren is both a digital accessibility analyst and a frontend web developer who focuses on building accessible, performant and intuitive websites. Darren is the developer for this platform and he built it with an accessibility-first approach, applying all of his knowledge of accessible web interfaces through each stage of the project.</p></div><dl class="author-bio__meta"><div class="author-bio__items-wrapper"><dt class="author-bio__term">Position:</dt><dd class="author-bio__description">Digital Accessibility Analyst</dd></div><div class="author-bio__items-wrapper"><dt class="author-bio__term">Organisation:</dt><dd class="author-bio__description">University of Westminster</dd></div><div class="author-bio__items-wrapper"><dt class="author-bio__term"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 0 0 1.88-2.38c-.83.5-1.75.85-2.72 1.05a4.28 4.28 0 0 0-7.32 3.91A12.2 12.2 0 0 1 3 4.79a4.24 4.24 0 0 0 1.33 5.71c-.71 0-1.37-.2-1.95-.5v.03a4.3 4.3 0 0 0 3.44 4.21 4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06A12.14 12.14 0 0 0 8.12 21C16 21 20.33 14.46 20.33 8.79l-.01-.56A8.57 8.57 0 0 0 22.46 6Z"/></svg><span class="visually-hidden">Twitter:</span></dt><dd class="author-bio__description"><a href="https://twitter.com/daz079" class="author-bio__link">@daz079</a></dd></div><div class="author-bio__items-wrapper"><dt class="author-bio__term"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M1 2.84A1.84 1.84 0 0 1 2.84 1h18.32A1.84 1.84 0 0 1 23 2.84v18.32A1.84 1.84 0 0 1 21.16 23H2.84A1.84 1.84 0 0 1 1 21.16V2.84Zm8.7 6.55h2.99v1.5c.43-.87 1.53-1.64 3.18-1.64 3.17 0 3.92 1.71 3.92 4.86v5.82h-3.2v-5.1c0-1.8-.44-2.8-1.53-2.8-1.51 0-2.14 1.08-2.14 2.8v5.1H9.7V9.39Zm-5.5 10.4h3.22V9.25H4.2v10.54ZM7.88 5.81a2.06 2.06 0 1 1-4.12 0 2.06 2.06 0 0 1 4.13 0Z" clip-rule="evenodd"/></svg><span class="visually-hidden">LinkedIn:</span></dt><dd class="author-bio__description"><a href="https://www.linkedin.com/in/darren-lee-224334147" class="author-bio__link">/in/darren-lee-224334147</a></dd></div></dl></div></aside></main><footer class="footer"><div class="footer__contact-us"><h2 data-no-accent>Contact us</h2><div class="footer__contact"><svg focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 0 0 1.88-2.38c-.83.5-1.75.85-2.72 1.05a4.28 4.28 0 0 0-7.32 3.91A12.2 12.2 0 0 1 3 4.79a4.24 4.24 0 0 0 1.33 5.71c-.71 0-1.37-.2-1.95-.5v.03a4.3 4.3 0 0 0 3.44 4.21 4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06A12.14 12.14 0 0 0 8.12 21C16 21 20.33 14.46 20.33 8.79l-.01-.56A8.57 8.57 0 0 0 22.46 6Z"/></svg> <a class="footer__link" href="https://twitter.com/MTAccessible?s=20&t=x69yq8wMBQ4y5j6byafhyw" class="">Find us on Twitter</a></div><div class="footer__contact"><svg focusable="false" aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg> <span class="visually-hidden">Email: </span><a class="footer__link" href="mailto:info@makethingsaccessible.com">info@makethingsaccessible.com</a></div></div><div class="footer__bottom"><div class="footer__help"><h2 data-no-accent>Need help?</h2><p class="footer__help-text">If you have trouble with accessing any part of our site or links, please let us know and one of our experienced team will identify and resolve the problem. If any part of the site does not work as intended with your assistive technology, please provide details of the browser, assistive technology you're using, and the URL wherever possible.</p></div><div class="footer__mta-links"><h2 id="footerLinks" data-no-accent>Make Things Accessible links</h2><ul class="footer__list"><li class="footer__list-item"><a class="footer__link" href="/">Home</a></li><li class="footer__list-item"><a class="footer__link" href="/about/">About</a></li><li class="footer__list-item"><a class="footer__link" href="/guides/">Guides</a></li><li class="footer__list-item"><a class="footer__link" href="/faqs/">FAQs</a></li><li class="footer__list-item"><a class="footer__link" href="/accessibility/">Accessibility</a></li><li class="footer__list-item"><a class="footer__link" href="/glossary/">Glossary</a></li><li class="footer__list-item"><a class="footer__link" href="/privacy/">Privacy Policy</a></li><li class="footer__list-item"><a class="footer__link" href="/sitemapNav/">Sitemap</a></li><li class="footer__list-item"><a class="footer__link" href="/codeOfConduct">Code of Conduct</a></li><li class="footer__list-item"><a class="footer__link" href="/contributing">Contributing</a></li><li class="footer__list-item"><a class="footer__link" href="/admin">Admin</a></li></ul></div><div class="footer__collabs"><h2 data-no-accent>RNIB</h2><ul class="footer__list--collabs"><li class="footer__list-item"><a class="footer__link" href="/rnib/accessibility-passport">Accessibility passport</a></li></ul><h2 data-no-accent>Access and Assistance for All</h2><ul class="footer__list--collabs"><li class="footer__list-item"><a class="footer__link" href="/aaa/">AAA Home</a></li><li class="footer__list-item"><a class="footer__link" href="/aaa/roles/">AAA Roles</a></li><li class="footer__list-item"><a class="footer__link" href="/aaa/student-stories/">AAA Student Stories</a></li><li class="footer__list-item"><a class="footer__link" href="/aaa/supporters/">AAA Supporters</a></li></ul></div><div class="footer__colophon"><p>&copy; 2024 Make Things Accessible (v2.0) - powered by <a class="footer__link colophon__link" href="https://www.netlify.com/">Netlify</a> & <a class="footer__link colophon__link" href="https://www.11ty.dev/">11ty</a></p></div></div></footer><script src="/js/search.js" type="module"></script><dialog class="dialog" id="settingsModal"><header class="dialog__header"><h1 class="dialog__title" tabindex="-1" autofocus>Site preferences</h1></header><div class="dialog__content"><p>Please feel free to display our site, your way by finding the preferences that work best for you. We do not track any data or preferences at all, should you select any options in the groups below, we store a small non-identifiable token to your browser's Local Storage, this is required for your preferencesto persist across pages accordion be present on repeat visits. You can remove those tokens if you wish, by simply selecting Unset, from each preference group.</p><h2 class="dialog__subtitle">Theming</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Theme</legend><div class="settings__btns-wrapper"><button class="settings__btn--theme-light btn btn--default" aria-pressed="false" data-pref="theme light">Light<span></span></button> <button class="settings__btn--theme-unset btn btn--default" aria-pressed="false" data-pref="theme unset">Unset<span></span></button> <button class="settings__btn--theme-dark btn btn--default" aria-pressed="false" data-pref="theme dark">Dark<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Code block theme</legend><h3 class="accordion">Code theme help</h3><div class="accordion__panel"><div><p>Code block themes can be changed independent of the site theme.</p><ul><li>Default: (Unset) Code blocks will have the same theme as the site theme.</li><li>Light 1: will be default for users viewing the light theme, this maintains the minimum 7:1 (WCAG Level AAA) contrast ratio we have used throughout the site, it can be quite difficult to identify the differences in colour between various syntax types, due to the similarities in colour at that contrast ratio</li><li>Light 2: drops the contrast for syntax highlighting down to WCAG Level AA standards (greater than 4.5:1)</li><li>Dark: Syntax highlighting has a minimum contrast of 7:1 and due to the dark background differences in colour may appear much more perceivable</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--code-theme-dark btn btn--default" aria-pressed="false" data-pref="code-theme dark">Dark<span></span></button> <button class="settings__btn--code-theme-unset btn btn--default" aria-pressed="false" data-pref="code-theme unset">Unset<span></span></button> <button class="settings__btn--code-theme-light btn btn--default" aria-pressed="false" data-pref="code-theme light">Light 1<span></span></button> <button class="settings__btn--code-theme-lower btn btn--default" aria-pressed="false" data-pref="code-theme lower">Light 2<span></span></button></div></fieldset></div><h2 class="dialog__subtitle">Motion</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Motion & animation</legend><h3 class="accordion">Motion & animation help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): Obeys device settings, if present. If no preference is set, there are subtle animations on this site which will be shown. If you have opted for reduce motion, smooth scrolling as well as expanding and collapsing animations will no longer be present, fading transtitions and micro animations will still be still present.</li><li>None: All animations and transitions are completely removed, including fade transitions.</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--motion-unset btn btn--default" aria-pressed="false" data-pref="motion unset">Unset<span></span></button> <button class="settings__btn--motion-none btn btn--default" aria-pressed="false" data-pref="motion none">None<span></span></button></div></fieldset></div><h2 class="dialog__subtitle">Links</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Underline all links</legend><h3 class="accordion">Underline all links help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): Most links are underlined, with a few exceptions such as: the top level links in the main navigation (on large screens), cards, tags and icon links.</li><li>Yes: Will add underlines to the exceptions outlined above, resulting in every link being underlined</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--underline-unset btn btn--default" aria-pressed="false" data-pref="underline unset">Unset<span></span></button> <button class="settings__btn--underline-yes btn btn--default" aria-pressed="false" data-pref="underline yes">Yes<span></span></button></div></fieldset></div><h2 class="dialog__subtitle">Text and paragraphs</h2><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Font size (main content)</legend><h3 class="accordion">Font size help</h3><div class="accordion__panel"><div><p>This setting does not apply to the site's header or footer regions</p><ul><li>Default (Unset): Font sizes are set to site defaults</li><li>Selecting Large or Largest will increase the font size of the main content, the size of the increase depends on various factors such as your display size and/or zoom level. The easiest way to determine which option suits you best would be to view this text after clicking either size's button</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--f-size-large btn btn--default" aria-pressed="false" data-pref="f-size large">Large<span></span></button> <button class="settings__btn--f-size-unset btn btn--default" aria-pressed="false" data-pref="f-size unset">Unset<span></span></button> <button class="settings__btn--f-size-largest btn btn--default" aria-pressed="false" data-pref="f-size largest">Largest<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Letter spacing</legend><h3 class="accordion">Letter spacing help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): Default letter spacing applies</li><li>Increased: Multiplies the font size by 0.12 and adds the sum as spacing between each character</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--l-spacing-unset btn btn--default" aria-pressed="false" data-pref="l-spacing unset">Unset<span></span></button> <button class="settings__btn--l-spacing-increased btn btn--default" aria-pressed="false" data-pref="l-spacing increased">Increased<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Line height</legend><h3 class="accordion">Line height help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): all text has a minimum line height of 1.5 times the size of the text</li><li>Increased: all text has a line height of twice the size of the text</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--l-height-unset btn btn--default" aria-pressed="false" data-pref="l-height unset">Unset<span></span></button> <button class="settings__btn--l-height-increased btn btn--default" aria-pressed="false" data-pref="l-height increased">Increased<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Paragraph spacing</legend><h3 class="accordion">Paragraph spacing help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): The space between paragraphs is equivalent to 1.5 times the height of the paragraph's text</li><li>Increased: The space between paragraphs is equivalent to 2.25 times the height of the paragraph's text</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--p-spacing-unset btn btn--default" aria-pressed="false" data-pref="p-spacing unset">Unset<span></span></button> <button class="settings__btn--p-spacing-increased btn btn--default" aria-pressed="false" data-pref="p-spacing increased">Increased<span></span></button></div></fieldset></div><div class="panel"><fieldset class="settings__fieldset"><legend class="settings__legend">Word spacing preference</legend><h3 class="accordion">Word spacing help</h3><div class="accordion__panel"><div><ul><li>Default (Unset): No modifications to word spacing are present</li><li>Increased: Spaces between words are equivalent to 0.16 times the font size</li></ul></div></div><div class="settings__btns-wrapper"><button class="settings__btn--w-spacing-unset btn btn--default" aria-pressed="false" data-pref="w-spacing unset">Unset<span></span></button> <button class="settings__btn--w-spacing-increased btn btn--default" aria-pressed="false" data-pref="w-spacing increased">Increased<span></span></button></div></fieldset></div></div><footer class="dialog__footer"><button class="dialog__close-btn btn btn--on-primary" id="modalCloseBtn"><span>Close</span></button></footer></dialog><script>const settingsModal=document.querySelector("#settingsModal"),modalCloseBtn=settingsModal.querySelector("#modalCloseBtn"),prefsBtns=settingsModal.querySelectorAll('button[class^="settings__btn"]'),prefsModalBtn=document.querySelector("#prefsBtn"),accordions=document.querySelectorAll(".accordion"),navBtn=document.querySelector("#navBtn"),collabBtn=document.querySelector("#collabBtn"),expandAll=document.querySelector(".accs__toggle--expand-all"),collapseAll=document.querySelector(".accs__toggle--collapse-all"),accsContainer=document.querySelector(".accs__container"),toggleBool=(e,t,a)=>{a||(a="false"===e.getAttribute(t)?"true":"false"),e.getAttribute(t),e.setAttribute(t,a)};if(accordions.forEach(((e,t)=>{const a=e.innerText,l=e.nextElementSibling;let o="false";if(e.closest("[data-pre-expanded]")&&(o="true"),e.setAttribute("data-no-accent",""),l.id=`accPanel-${t+1}`,e.innerHTML=`<button class="accordion__btn" id="acc-${t+1}"\n  aria-controls="accPanel-${t+1}"\n  aria-expanded="${o}">${a}</button>`,"div"!==l.firstElementChild.tagName){const e=l.innerHTML;l.innerHTML="",l.insertAdjacentHTML("afterbegin",`<div>${e}</div>`)}let r=e.firstElementChild;e.setAttribute("data-open",`${o}`),r.addEventListener("click",(()=>{toggleBool(r,"aria-expanded"),toggleBool(r.parentElement,"data-open")})),(l.nextElementSibling===e||l.hasAttribute("data-last"))&&e.classList.add("accordion--multiple")})),accordions.forEach((e=>{const t=e.nextElementSibling;t.nextElementSibling&&t.nextElementSibling.hasAttribute("data-open")||t.setAttribute("data-last",""),e.previousElementSibling&&e.previousElementSibling.classList.contains("accordion__panel")||e.nextElementSibling.setAttribute("data-first",""),t.hasAttribute("data-first")&&t.hasAttribute("data-last")?(t.removeAttribute("data-last"),t.removeAttribute("data-first"),t.previousElementSibling.classList.add("accordion--single")):t.previousElementSibling.classList.add("accordion--multiple")})),accsContainer){const e=accsContainer.querySelectorAll(".accordion");collapseAll.setAttribute("aria-pressed","true"),accsContainer.addEventListener("click",(t=>{let a;if(t.target.hasAttribute("aria-pressed")&&(t.target===expandAll?(a="true",expandAll.setAttribute("aria-pressed","true"),collapseAll.setAttribute("aria-pressed","false")):t.target===collapseAll&&(a="false",collapseAll.setAttribute("aria-pressed","true"),expandAll.setAttribute("aria-pressed","false")),e.forEach((e=>{toggleBool(e,"data-open",a),toggleBool(e.firstElementChild,"aria-expanded",a)}))),t.target.classList.contains("accordion__btn")){let t=accsContainer.querySelectorAll('.accordion__btn[aria-expanded="true"]');t.length&&t.length<e.length?(expandAll.setAttribute("aria-pressed","mixed"),collapseAll.setAttribute("aria-pressed","mixed")):t.length?t.length&&t.length===e.length?(expandAll.setAttribute("aria-pressed","true"),collapseAll.setAttribute("aria-pressed","false")):(expandAll.setAttribute("aria-pressed","false"),collapseAll.setAttribute("aria-pressed","false")):(collapseAll.setAttribute("aria-pressed","true"),expandAll.setAttribute("aria-pressed","false"))}}))}prefsBtns.forEach((e=>{e.addEventListener("click",(()=>{e.setAttribute("aria-pressed","true");const t=e.getAttribute("data-pref").split(" ");"unset"!==t[1]?(document.documentElement.setAttribute(`data-pref--${t[0]}`,t[1]),window.localStorage.setItem(`data-pref--${t[0]}`,t[1])):(document.documentElement.removeAttribute(`data-pref--${t[0]}`),window.localStorage.removeItem(`data-pref--${t[0]}`)),togglePrefsBtns(e),"theme"===t[0]&&matchLogoToTheme()}))}));const togglePrefsBtns=e=>{e.closest(".settings__btns-wrapper").querySelectorAll("button").forEach((t=>{t!==e&&t.setAttribute("aria-pressed","false")}))},matchLogoToTheme=()=>{let e;e=document.documentElement.getAttribute("data-pref--theme")?document.documentElement.getAttribute("data-pref--theme"):window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",document.querySelectorAll("[data-main-logo]").forEach((t=>{t.getAttribute("srcset").includes(e)?t.setAttribute("media","all"):t.setAttribute("media","none")}))};matchLogoToTheme(),window.onload=()=>{const e={...localStorage};for(const t in e)t.startsWith("data-pref-")&&"data-pref--theme"!==t&&document.documentElement.setAttribute(`${t}`,e[t]);for(const e of document.documentElement.attributes)if(e.name.includes("data-pref--")){let t=e.name.split("--");settingsModal.querySelector(`.settings__btn--${t[1]}-${e.value}`).setAttribute("aria-pressed","true")}settingsModal.querySelectorAll(".settings__btns-wrapper").forEach((e=>{e.querySelector('button[aria-pressed="true"]')||e.querySelector('[data-pref~="unset"').setAttribute("aria-pressed","true")}))},collabBtn.addEventListener("click",(()=>{toggleBool(collabBtn,"aria-expanded")})),navBtn.addEventListener("click",(()=>{toggleBool(navBtn,"aria-expanded"),navBtn.removeAttribute("data-untouched")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&("true"!==collabBtn.getAttribute("aria-expanded")||settingsModal.hasAttribute("open")||toggleBool(collabBtn,"aria-expanded"))})),prefsModalBtn.addEventListener("click",(()=>{settingsModal.removeAttribute("hidden"),settingsModal.showModal()})),modalCloseBtn.addEventListener("click",(()=>{closeModal()})),document.addEventListener("click",(e=>{e.target===settingsModal&&closeModal()}));const closeModal=()=>{settingsModal.classList.add("closing"),setTimeout((()=>{settingsModal.classList.remove("closing"),settingsModal.setAttribute("hidden",""),settingsModal.close()}),800)},codeBlocks=document.querySelectorAll("pre"),tables=document.querySelectorAll("table");if(navigator.clipboard){const e=document.createElement("span");e.classList.add("announcement","visually-hidden"),e.setAttribute("aria-live","polite"),document.querySelector("footer").appendChild(e)}async function copySnippet(e){let t=e.closest(".code__header").querySelector(".copy__announcement");t.innerText="";let a=e.closest(".code__wrapper").querySelector("code").innerText;await navigator.clipboard.writeText(a),t.innerText="Copied to clipboard",setTimeout((()=>{t.innerText=""}),5e3)}codeBlocks.forEach(((e,t)=>{let a=e.getAttribute("class").split("-");if(a){let l=`${"javascript"==a[1]?a[1]="JavaScript":a[1].toUpperCase()}`;e.insertAdjacentHTML("beforebegin",`<div class="code__wrapper"><section class="code__region" aria-labelledby="cb${t+1}"><div class="code__header">\n    <span id="cb${t+1}" class="visually-hidden">Code block ${t+1}, ${l}</span></div></section></div>`);let o=e.previousElementSibling.querySelector(".code__header");e.previousElementSibling.querySelector(".code__region").appendChild(e),navigator.clipboard?(e.classList.add("code--with-copy"),o.insertAdjacentHTML("afterbegin",`<output class="copy__announcement flex--middle"></output><button class="code__copy-btn btn btn--default">Copy ${l}</button>`)):o.insertAdjacentHTML("afterbegin",`<span class="code__label">${l}</span>`)}})),document.querySelectorAll(".code__copy-btn").forEach((e=>{e.addEventListener("click",(e=>{copySnippet(e.target)}))}));const addTabStopToCodeBlock=()=>{document.querySelectorAll(".code__region").forEach((e=>{e.scrollWidth>e.getBoundingClientRect().width?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}))},toggleTabStopOnTable=()=>{tables.forEach(((e,t)=>{e.scrollWidth>window.innerWidth-20?(e.setAttribute("tabindex","0"),e.querySelector("caption")?(e.querySelector("caption").id=`caption-${t+1}`,e.setAttribute("aria-labelledby",e.querySelector("caption").id)):e.setAttribute("aria-label","Scrollable")):(e.removeAttribute("tabindex"),e.querySelector("caption")?e.removeAttribute("aria-labelledby"):e.removeAttribute("aria-label"))}))};window.addEventListener("resize",toggleTabStopOnTable),window.addEventListener("resize",addTabStopToCodeBlock),window.onresize=toggleTabStopOnTable,window.onresize=addTabStopToCodeBlock,toggleTabStopOnTable(),addTabStopToCodeBlock(),document.querySelectorAll(".callout__info").forEach((e=>{e.querySelector(".callout__icon").insertAdjacentHTML("afterbegin",'<svg width="24px" height="24px"><use href="#cInfo"></use></svg>')})),document.querySelectorAll(".callout__tip").forEach((e=>{e.querySelector(".callout__icon").insertAdjacentHTML("afterbegin",'<svg width="24px" height="24px"><use href="#cTip"></use></svg>')})),document.querySelectorAll(".callout__warn").forEach((e=>{e.querySelector(".callout__icon").insertAdjacentHTML("afterbegin",'<svg width="24px" height="24px"><use href="#cWarn"></use></svg>')}));</script></body></html>